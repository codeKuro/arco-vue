var B=Object.defineProperty,M=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var T=(u,n,p)=>n in u?B(u,n,{enumerable:!0,configurable:!0,writable:!0,value:p}):u[n]=p,b=(u,n)=>{for(var p in n||(n={}))E.call(n,p)&&T(u,p,n[p]);if(N)for(var p of N(n))R.call(n,p)&&T(u,p,n[p]);return u},q=(u,n)=>M(u,A(n));import{B as j,d as w,r as h,e as l,o as y,c as $,w as a,f as t,L as S,t as d,i as m,g as L,b as D,bc as P,u as z}from"./vendor.e6e9099f.js";import{u as K}from"./loading.3e447ed2.js";import{_ as C}from"./index.525cc014.js";function Z(u){return j.post("/api/channel-form/submit",{data:u})}const G=m("APP\u901A\u7528\u6E20\u9053"),H=w({emits:["changeStep"],setup(u,{emit:n}){const p=h(),e=h({activityName:"",channelType:"",promotionTime:[],promoteLink:"https://arco.design"}),v=async()=>{var o;await((o=p.value)==null?void 0:o.validate())||n("changeStep","forward",b({},e.value))};return(s,o)=>{const r=l("a-input"),i=l("a-form-item"),c=l("a-option"),f=l("a-select"),F=l("a-range-picker"),k=l("a-button"),V=l("a-form");return y(),$(V,{ref_key:"formRef",ref:p,model:e.value,class:"form","label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:a(()=>[t(i,{field:"activityName",label:s.$t("stepForm.form.label.activityName"),rules:[{required:!0,message:s.$t("stepForm.form.error.activityName.required")},{match:/^[a-zA-Z0-9\u4e00-\u9fa5]{1,20}$/,message:s.$t("stepForm.form.error.activityName.pattern")}]},{default:a(()=>[t(r,{modelValue:e.value.activityName,"onUpdate:modelValue":o[0]||(o[0]=_=>e.value.activityName=_),placeholder:s.$t("stepForm.placeholder.activityName")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(i,{field:"channelType",label:s.$t("stepForm.form.label.channelType"),rules:[{required:!0,message:s.$t("stepForm.form.error.channelType.required")}]},{default:a(()=>[t(f,{modelValue:e.value.channelType,"onUpdate:modelValue":o[1]||(o[1]=_=>e.value.channelType=_),placeholder:s.$t("stepForm.placeholder.channelType")},{default:a(()=>[t(c,null,{default:a(()=>[G]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(i,{field:"promotionTime",label:s.$t("stepForm.form.label.promotionTime"),rules:[{required:!0,message:s.$t("stepForm.form.error.promotionTime.required")}]},{default:a(()=>[t(F,{modelValue:e.value.promotionTime,"onUpdate:modelValue":o[2]||(o[2]=_=>e.value.promotionTime=_)},null,8,["modelValue"])]),_:1},8,["label","rules"]),t(i,{field:"promoteLink",label:s.$t("stepForm.form.label.promoteLink"),rules:[{required:!0,message:s.$t("stepForm.form.error.promoteLink.required")},{type:"url",message:s.$t("stepForm.form.error.promoteLink.pattern")}],"row-class":"keep-margin"},{help:a(()=>[S("span",null,d(s.$t("stepForm.form.tip.promoteLink")),1)]),default:a(()=>[t(r,{modelValue:e.value.promoteLink,"onUpdate:modelValue":o[3]||(o[3]=_=>e.value.promoteLink=_),placeholder:s.$t("stepForm.placeholder.promoteLink")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(i,null,{default:a(()=>[t(k,{type:"primary",onClick:v},{default:a(()=>[m(d(s.$t("stepForm.button.next")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}});var J=C(H,[["__scopeId","data-v-5aa5af3a"]]);const O=m("\u4ECA\u65E5\u5934\u6761"),Q=m("\u706B\u5C71"),W=w({emits:["changeStep"],setup(u,{emit:n}){const p=h(),e=h({advertisingSource:"",advertisingMedia:"",keyword:[],pushNotify:!0,advertisingContent:""}),v=async()=>{var r;await((r=p.value)==null?void 0:r.validate())||n("changeStep","submit",b({},e.value))},s=()=>{n("changeStep","backward")};return(o,r)=>{const i=l("a-input"),c=l("a-form-item"),f=l("a-option"),F=l("a-select"),k=l("a-switch"),V=l("a-textarea"),_=l("a-button"),I=l("a-space"),U=l("a-form");return y(),$(U,{ref_key:"formRef",ref:p,model:e.value,class:"form","label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:a(()=>[t(c,{field:"advertisingSource",label:o.$t("stepForm.form.label.advertisingSource"),rules:[{required:!0,message:o.$t("stepForm.form.error.advertisingSource.required")}]},{default:a(()=>[t(i,{modelValue:e.value.advertisingSource,"onUpdate:modelValue":r[0]||(r[0]=g=>e.value.advertisingSource=g),placeholder:o.$t("stepForm.placeholder.advertisingSource")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(c,{field:"advertisingMedia",label:o.$t("stepForm.form.label.advertisingMedia"),rules:[{required:!0,message:o.$t("stepForm.form.error.advertisingMedia.required")}]},{default:a(()=>[t(i,{modelValue:e.value.advertisingMedia,"onUpdate:modelValue":r[1]||(r[1]=g=>e.value.advertisingMedia=g),placeholder:o.$t("stepForm.placeholder.advertisingMedia")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(c,{field:"keyword",label:o.$t("stepForm.form.label.keyword"),rules:[{required:!0,message:o.$t("stepForm.form.error.keyword.required")}]},{default:a(()=>[t(F,{modelValue:e.value.keyword,"onUpdate:modelValue":r[2]||(r[2]=g=>e.value.keyword=g),placeholder:o.$t("stepForm.placeholder.keyword"),multiple:""},{default:a(()=>[t(f,null,{default:a(()=>[O]),_:1}),t(f,null,{default:a(()=>[Q]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(c,{field:"pushNotify",label:o.$t("stepForm.form.label.pushNotify"),rules:[{required:!0}]},{default:a(()=>[t(k,{modelValue:e.value.pushNotify,"onUpdate:modelValue":r[3]||(r[3]=g=>e.value.pushNotify=g)},null,8,["modelValue"])]),_:1},8,["label"]),t(c,{field:"advertisingContent",label:o.$t("stepForm.form.label.advertisingContent"),rules:[{required:!0,message:o.$t("stepForm.form.error.advertisingContent.required")},{maxLength:200,message:o.$t("stepForm.form.error.advertisingContent.maxLength")}],"row-class":"keep-margin"},{default:a(()=>[t(V,{modelValue:e.value.advertisingContent,"onUpdate:modelValue":r[4]||(r[4]=g=>e.value.advertisingContent=g),placeholder:o.$t("stepForm.placeholder.advertisingContent")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(c,null,{default:a(()=>[t(I,null,{default:a(()=>[t(_,{type:"secondary",onClick:s},{default:a(()=>[m(d(o.$t("stepForm.button.prev")),1)]),_:1}),t(_,{type:"primary",onClick:v},{default:a(()=>[m(d(o.$t("stepForm.button.next")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});var X=C(W,[["__scopeId","data-v-412a8ce2"]]);const Y={class:"success-wrap"},x={class:"details-wrapper"},ee=w({emits:["changeStep"],setup(u,{emit:n}){const p=()=>{n("changeStep",1)};return(e,v)=>{const s=l("a-result"),o=l("a-button"),r=l("a-space"),i=l("a-typography-title"),c=l("a-link"),f=l("a-typography-paragraph");return y(),L("div",Y,[t(s,{status:"success",title:e.$t("stepForm.success.title"),subtitle:e.$t("stepForm.success.subTitle")},null,8,["title","subtitle"]),t(r,{size:16},{default:a(()=>[t(o,{key:"view",type:"primary"},{default:a(()=>[m(d(e.$t("stepForm.button.view")),1)]),_:1}),t(o,{key:"again",type:"secondary",onClick:p},{default:a(()=>[m(d(e.$t("stepForm.button.again")),1)]),_:1})]),_:1}),S("div",x,[t(i,{heading:6,style:{"margin-top":"0"}},{default:a(()=>[m(d(e.$t("stepForm.form.description.title")),1)]),_:1}),t(f,{style:{"margin-bottom":"0"}},{default:a(()=>[m(d(e.$t("stepForm.form.description.text"))+" ",1),t(c,{href:"link"},{default:a(()=>[m(d(e.$t("stepForm.button.view")),1)]),_:1})]),_:1})])])}}});var te=C(ee,[["__scopeId","data-v-e5852408"]]);const oe={class:"container"},ae={class:"wrapper"},re={name:"Step"},le=w(q(b({},re),{setup(u){const{loading:n,setLoading:p}=K(!1),e=h(1),v=h({}),s=async()=>{p(!0);try{await Z(v.value),e.value=3,v.value={}}catch{}finally{p(!1)}},o=(r,i)=>{if(typeof r=="number"){e.value=r;return}if(r==="forward"||r==="submit"){if(v.value=b(b({},v.value),i),r==="submit"){s();return}e.value+=1}else r==="backward"&&(e.value-=1)};return(r,i)=>{const c=l("Breadcrumb"),f=l("a-step"),F=l("a-steps"),k=l("a-card"),V=l("a-spin");return y(),L("div",oe,[t(c,{items:["menu.form","menu.form.step"]},null,8,["items"]),t(V,{loading:z(n),style:{width:"100%"}},{default:a(()=>[t(k,{class:"general-card"},{title:a(()=>[m(d(r.$t("stepForm.step.title")),1)]),default:a(()=>[S("div",ae,[t(F,{current:e.value,"onUpdate:current":i[0]||(i[0]=_=>e.value=_),style:{width:"580px"},"line-less":"",class:"steps"},{default:a(()=>[t(f,{description:r.$t("stepForm.step.subTitle.baseInfo")},{default:a(()=>[m(d(r.$t("stepForm.step.title.baseInfo")),1)]),_:1},8,["description"]),t(f,{description:r.$t("stepForm.step.subTitle.channel")},{default:a(()=>[m(d(r.$t("stepForm.step.title.channel")),1)]),_:1},8,["description"]),t(f,{description:r.$t("stepForm.step.subTitle.finish")},{default:a(()=>[m(d(r.$t("stepForm.step.title.finish")),1)]),_:1},8,["description"])]),_:1},8,["current"]),(y(),$(P,null,[e.value===1?(y(),$(J,{key:0,onChangeStep:o})):e.value===2?(y(),$(X,{key:1,onChangeStep:o})):e.value===3?(y(),$(te,{key:2,onChangeStep:o})):D("",!0)],1024))])]),_:1})]),_:1},8,["loading"])])}}}));var ie=C(le,[["__scopeId","data-v-6e1891d0"]]);export{ie as default};
