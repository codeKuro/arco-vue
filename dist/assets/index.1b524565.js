var j=Object.defineProperty,P=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var C=(s,a,t)=>a in s?j(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,B=(s,a)=>{for(var t in a||(a={}))x.call(a,t)&&C(s,t,a[t]);if(q)for(var t of q(a))z.call(a,t)&&C(s,t,a[t]);return s},D=(s,a)=>P(s,R(a));import{d as I,r as h,e as n,o as w,c as L,w as l,f as e,g as N,b as A,u as F,i as k,t as $,O,R as E}from"./vendor.e6e9099f.js";import{_ as V,u as J,b as M,g as W}from"./index.525cc014.js";import{u as T}from"./user-center.042b79ed.js";import{u as G}from"./loading.3e447ed2.js";const H=["src"],K=I({setup(s){const a=J(),t={uid:"-2",name:"avatar.png",url:a.avatar},v=[{label:"userSetting.label.username",value:a.username},{label:"userSetting.label.nickname",value:a.nickname},{label:"userSetting.label.accountId",value:a.id},{label:"userSetting.label.phone",value:a.mobile},{label:"userSetting.label.email",value:a.email}],c=h([t]),_=(d,f)=>{c.value=[f]},y=d=>{const f=new AbortController;return async function(){const{onProgress:r,onError:m,onSuccess:u,fileItem:b,name:S="file"}=d;r(20);const g=new FormData;g.append(S,b.file);const i=p=>{let U;p.total>0&&(U=p.loaded/p.total*100),r(parseInt(String(U),10),p)};try{const p=await T(g,{controller:f,onUploadProgress:i});u(p)}catch(p){m(p)}}(),{abort(){f.abort()}}};return(d,f)=>{const o=n("icon-camera"),r=n("a-avatar"),m=n("a-upload"),u=n("a-descriptions"),b=n("a-space"),S=n("a-card");return w(),L(S,{bordered:!1},{default:l(()=>[e(b,{size:54},{default:l(()=>[e(m,{"custom-request":y,"list-type":"picture-card","file-list":c.value,"show-upload-button":!0,"show-file-list":!1,onChange:_},{"upload-button":l(()=>[e(r,{size:100,class:"info-avatar"},{"trigger-icon":l(()=>[e(o)]),default:l(()=>[c.value.length?(w(),N("img",{key:0,src:c.value[0].url},null,8,H)):A("",!0)]),_:1})]),_:1},8,["file-list"]),e(u,{data:F(v),column:2,align:"right",layout:"inline-horizontal","label-style":{width:"140px",fontWeight:"normal",color:"rgb(var(--gray-8))"},"value-style":{width:"200px",paddingLeft:"8px",textAlign:"left"}},{label:l(({label:g})=>[k($(d.$t(g))+" :",1)]),_:1},8,["data","label-style"])]),_:1})]),_:1})}}});var Q=V(K,[["__scopeId","data-v-c24ba81c"]]);const X=I({setup(s){const a=h(),t=h({nickname:"",password:"",mobile:"",email:""}),v=h(""),{loading:c,setLoading:_}=G(!0),{t:y}=O(),d=async()=>{_(!0);const o=JSON.parse(JSON.stringify(t.value));try{await M(o),E.success(y("userSetting.form.edit.success"))}catch(r){v.value=r.message}finally{await W(),_(!1)}},f=async()=>{var o;await((o=a.value)==null?void 0:o.resetFields())};return(o,r)=>{const m=n("a-input"),u=n("a-form-item"),b=n("a-button"),S=n("a-space"),g=n("a-form");return w(),L(g,{ref_key:"formRef",ref:a,model:t.value,class:"form","label-col-props":{span:8},"wrapper-col-props":{span:16}},{default:l(()=>[e(u,{field:"nickname",label:o.$t("userSetting.basicInfo.form.label.nickname"),rules:[{required:!0,message:o.$t("userSetting.form.error.nickname.required")}]},{default:l(()=>[e(m,{modelValue:t.value.nickname,"onUpdate:modelValue":r[0]||(r[0]=i=>t.value.nickname=i),placeholder:o.$t("userSetting.basicInfo.placeholder.nickname")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(u,{field:"password",label:o.$t("userSetting.basicInfo.form.label.password")},{default:l(()=>[e(m,{modelValue:t.value.password,"onUpdate:modelValue":r[1]||(r[1]=i=>t.value.password=i),placeholder:o.$t("userSetting.basicInfo.placeholder.password")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(u,{field:"mobile",label:o.$t("userSetting.basicInfo.form.label.mobile"),rules:[{required:!0,message:o.$t("userSetting.form.error.mobile.required")}]},{default:l(()=>[e(m,{modelValue:t.value.mobile,"onUpdate:modelValue":r[2]||(r[2]=i=>t.value.mobile=i),placeholder:o.$t("userSetting.basicInfo.placeholder.mobile")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(u,{field:"email",label:o.$t("userSetting.basicInfo.form.label.email"),rules:[{required:!0,message:o.$t("userSetting.form.error.email.required")}]},{default:l(()=>[e(m,{modelValue:t.value.email,"onUpdate:modelValue":r[3]||(r[3]=i=>t.value.email=i),placeholder:o.$t("userSetting.basicInfo.placeholder.email")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(u,null,{default:l(()=>[e(S,null,{default:l(()=>[e(b,{type:"primary",onClick:d},{default:l(()=>[k($(o.$t("userSetting.save")),1)]),_:1}),e(b,{type:"secondary",onClick:f},{default:l(()=>[k($(o.$t("userSetting.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});var Y=V(X,[["__scopeId","data-v-9246fb66"]]);const Z={class:"container"},ee={name:"Setting"},ae=I(D(B({},ee),{setup(s){return(a,t)=>{const v=n("Breadcrumb"),c=n("a-col"),_=n("a-row"),y=n("a-tab-pane"),d=n("a-tabs");return w(),N("div",Z,[e(v,{items:["menu.user","menu.user.setting"]},null,8,["items"]),e(_,{style:{"margin-bottom":"16px"}},{default:l(()=>[e(c,{span:24},{default:l(()=>[e(Q)]),_:1})]),_:1}),e(_,{class:"wrapper"},{default:l(()=>[e(c,{span:24},{default:l(()=>[e(d,{"default-active-key":"1",type:"rounded"},{default:l(()=>[e(y,{key:"1",title:a.$t("userSetting.tab.basicInformation")},{default:l(()=>[e(Y)]),_:1},8,["title"])]),_:1})]),_:1})]),_:1})])}}}));var se=V(ae,[["__scopeId","data-v-8233d5ae"]]);export{se as default};
