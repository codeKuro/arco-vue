var Ce=Object.defineProperty,we=Object.defineProperties;var Ue=Object.getOwnPropertyDescriptors;var ue=Object.getOwnPropertySymbols;var Se=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable;var se=(y,r,m)=>r in y?Ce(y,r,{enumerable:!0,configurable:!0,writable:!0,value:m}):y[r]=m,de=(y,r)=>{for(var m in r||(r={}))Se.call(r,m)&&se(y,m,r[m]);if(ue)for(var m of ue(r))Fe.call(r,m)&&se(y,m,r[m]);return y},ie=(y,r)=>we(y,Ue(r));import{d as me,bh as De,r as p,bi as Ne,e as u,o as _,c as M,w as l,L as W,f as e,g as re,h as Ee,b8 as ce,t as g,F as Le,i as v,P as Re,R as I,O as Oe,$ as Be,Q as Ke,b as Q,u as T,a2 as Pe,a3 as je}from"./vendor.e6e9099f.js";import{u as qe}from"./loading.3e447ed2.js";import{q as ze,d as Ie,g as Qe,c as Te,u as Ae,a as Je}from"./serve.c5d545d7.js";import{_ as pe,t as We}from"./index.525cc014.js";const Ge={class:"icon-container"},He={class:"icon-wrapper"},Xe=["onClick"],Ye={class:"label-name"},Ze=v("\u8BF7\u9009\u62E9\u56FE\u6807"),xe=v(" \u5DF2\u9009\u62E9 "),ea=me({props:{value:{type:String,default:""},enableCopy:{type:Boolean,default:!1}},emits:["onSelect","update:value"],setup(y,{emit:r}){const m=y,V=Object.keys(De).filter(s=>s!=="default"),d=36,$=p(1),i=p(V.slice(0,d)),h=p([]),E=p(V.length),o=p(!1),C=p(m.value);Ne(()=>m.value,s=>{C.value=s});const F=s=>{$.value=s,i.value=h.value.length===0?V.slice((s-1)*d,s*d):h.value.slice((s-1)*d,s*d)},L=s=>{if(s){const k=s.toLowerCase();h.value=V.filter(D=>D.toLowerCase().startsWith((k.startsWith("icon")?"":"icon")+k)),E.value=h.value.length,i.value=h.value.slice(0,d),console.log(i.value)}else h.value=[],E.value=V.length,i.value=V.slice(($.value-1)*d,$.value*d)},R=async s=>{if(r("onSelect",s),r("update:value",s),C.value=s,o.value=!1,m.enableCopy){const{isSupported:k,copied:D,copy:P}=Re();k&&(await P(`<${s} />`),D&&I.success(`\u5DF2\u9009\u62E9\u5E76\u4E14\u590D\u5236\u6210\u529F ${s} \u56FE\u6807`))}};return(s,k)=>{const D=u("a-input-search"),P=u("a-col"),N=u("a-row"),G=u("a-space"),A=u("a-pagination"),j=u("a-button"),J=u("a-popover");return _(),M(J,{visible:o.value,"onUpdate:visible":k[0]||(k[0]=w=>o.value=w),trigger:"click"},{content:l(()=>[W("div",Ge,[e(G,{direction:"vertical"},{default:l(()=>[e(D,{placeholder:"\u641C\u7D22\u56FE\u6807\u540D\u79F0","press-enter":"",style:{width:"100%"},onSearch:L,allowClear:"","search-button":""}),W("div",He,[e(N,{wrap:!0},{default:l(()=>[(_(!0),re(Le,null,Ee(i.value,w=>(_(),M(P,{span:4,key:w},{default:l(()=>[W("div",{class:"flex justify-center items-center flex-col icon-item",onClick:H=>R(w)},[(_(),M(ce(w),{style:{"font-size":"26px"}})),W("div",Ye,g(w),1)],8,Xe)]),_:2},1024))),128))]),_:1})])]),_:1}),e(A,{size:"mini",pageSize:d,total:E.value,"show-size-changer":!1,onChange:F},null,8,["total"])])]),default:l(()=>[C.value?(_(),M(j,{key:1,status:"success"},{default:l(()=>[xe,(_(),M(ce(C.value)))]),_:1})):(_(),M(j,{key:0,type:"primary"},{default:l(()=>[Ze]),_:1}))]),_:1},8,["visible"])}}});var aa=pe(ea,[["__scopeId","data-v-5c676196"]]);const la={class:"container"},ta={name:"MenuManagement"},na=me(ie(de({},ta),{setup(y){const r=()=>({id:"",type:1,appName:"",name:"",pid:"",uri:"",identify:"",isMenu:0,scopes:"",icon:"",urlQuery:"",target:"",checkProduct:0,status:0,sort:0,remark:""}),m=p(""),{loading:V,setLoading:d}=qe(!0),{t:$}=Oe(),i=p("1"),h=p([]),E=p(),o=p(r()),C=p(!1),F=p(!1),L=p(!1),R=p(),s=p([]),k=Be({type:"checkbox",showCheckedAll:!0,checkStrictly:!0}),D=p([]),P=Ke(()=>[{label:$("menuManagement.form.type.1"),value:1},{label:$("menuManagement.form.type.2"),value:2}]),N=async(a=i.value==="1"?{scopes:"admin"}:{scopes:"member"})=>{d(!0),console.log(i);try{const{data:n}=await ze(a);h.value=n.nodeTree,D.value=We(n.nodeTree)}catch{}finally{d(!1)}};N();const G=a=>{i.value=a,N()},A=()=>{var a;R.value="add",(a=E.value)==null||a.resetFields(),i.value==="1"?o.value.scopes="admin":o.value.scopes="member",console.log(o),F.value=!0},j=()=>{console.log(s),s.value.length?L.value=!0:I.error($("menuManagement.button.confirmation.deleteAll"))},J=async(a={ids:s.value})=>{d(!0);try{await Ie(a),N()}catch(n){m.value=n.message}finally{d(!1),L.value=!1}},w=()=>{L.value=!1},H=async a=>{var n;d(!0),R.value="edit";try{const{data:U}=await Qe({id:a.id}),S=Object.keys(U).reduce((b,q)=>(b[q]={value:U[q]},b),{});console.log(S),(n=E.value)==null||n.setFields(S),F.value=!0}catch{}finally{d(!1)}},fe=async({errors:a,values:n})=>{if(!a){console.log(R.value),d(!0);const U=JSON.parse(JSON.stringify(o.value));if(R.value==="add"){U.id=void 0;try{await Te(U),I.success($("menuManagement.form.add.success")),N()}catch(S){m.value=S.message}finally{d(!1),F.value=!1}}else try{await Ae(U),I.success($("menuManagement.form.edit.success")),N()}catch(S){m.value=S.message}finally{d(!1),F.value=!1}}},X=async a=>{C.value=!0;try{const{data:n}=await Je({id:a.id});I.success($("menuManagement.form.edit.success")),N()}catch{}finally{C.value=!1}};function ve(){console.log(o)}return(a,n)=>{const U=u("Breadcrumb"),S=u("icon-plus"),b=u("a-button"),q=u("icon-delete"),Y=u("a-popconfirm"),K=u("a-space"),Z=u("a-col"),x=u("a-row"),f=u("a-table-column"),ee=u("icon-check"),ae=u("icon-close"),z=u("a-switch"),le=u("icon-edit"),te=u("a-table"),ne=u("a-tab-pane"),ge=u("a-tabs"),_e=u("a-card"),ye=u("a-select"),c=u("a-form-item"),O=u("a-input"),be=u("a-tree-select"),oe=u("a-radio"),Me=u("a-radio-group"),$e=u("a-input-number"),he=u("a-textarea"),ke=u("a-form"),Ve=u("a-modal");return _(),re("div",la,[e(U,{items:["menu.server","menu.server.menuManagement"]},null,8,["items"]),e(_e,{class:"general-card",title:a.$t("menu.server.menuManagement")},{default:l(()=>[e(ge,{modelValue:i.value,"onUpdate:modelValue":n[4]||(n[4]=t=>i.value=t),"default-active-key":"1",onChange:G},{default:l(()=>[e(ne,{key:"1",title:a.$t("menu.card.tabOne")},{default:l(()=>[i.value==1?(_(),M(x,{key:0,style:{"margin-bottom":"16px"}},{default:l(()=>[e(Z,{span:16},{default:l(()=>[e(K,null,{default:l(()=>[e(b,{type:"primary",onClick:n[0]||(n[0]=t=>A(i.value))},{icon:l(()=>[e(S)]),default:l(()=>[v(" "+g(a.$t("menuManagement.operation.create")),1)]),_:1}),e(Y,{"popup-visible":L.value,content:a.$t("menuManagement.button.confirmation.delete"),onOk:J,onCancel:w},{default:l(()=>[e(b,{type:"primary",onClick:j},{icon:l(()=>[e(q)]),default:l(()=>[v(" "+g(a.$t("menuManagement.operation.delete")),1)]),_:1})]),_:1},8,["popup-visible","content"])]),_:1})]),_:1})]),_:1})):Q("",!0),i.value==1?(_(),M(te,{key:1,selectedKeys:s.value,"onUpdate:selectedKeys":n[1]||(n[1]=t=>s.value=t),"row-key":"id",loading:T(V),data:h.value,bordered:!1,"row-selection":T(k),pagination:!1},{columns:l(()=>[e(f,{title:a.$t("menuManagement.columns.type"),"data-index":"type"},{cell:l(({record:t})=>[v(g(a.$t(`menuManagement.form.type.${t.type}`)),1)]),_:1},8,["title"]),e(f,{title:a.$t("menuManagement.columns.name"),"data-index":"name"},null,8,["title"]),e(f,{title:a.$t("menuManagement.columns.identify"),"data-index":"identify"},null,8,["title"]),e(f,{title:a.$t("menuManagement.columns.uri"),"data-index":"uri"},null,8,["title"]),e(f,{title:a.$t("menuManagement.columns.isMenu"),"data-index":"isMenu"},{cell:l(({record:t})=>[v(g(a.$t(`menuManagement.form.isMenu.${t.isMenu}`)),1)]),_:1},8,["title"]),e(f,{title:a.$t("menuManagement.columns.icon"),"data-index":"icon"},null,8,["title"]),e(f,{title:a.$t("menuManagement.columns.status"),"data-index":"status"},{cell:l(({record:t})=>[e(K,null,{default:l(()=>[e(z,{modelValue:t.status,"onUpdate:modelValue":B=>t.status=B,loading:C.value,"checked-value":1,"unchecked-value":0,onChange:B=>X(t)},{"checked-icon":l(()=>[e(ee)]),"unchecked-icon":l(()=>[e(ae)]),_:2},1032,["modelValue","onUpdate:modelValue","loading","onChange"])]),_:2},1024)]),_:1},8,["title"]),e(f,{title:a.$t("menuManagement.columns.operations"),"data-index":"operations"},{cell:l(({record:t})=>[e(b,{status:"success",size:"small",onClick:B=>H(t)},{icon:l(()=>[e(le)]),default:l(()=>[v(" "+g(a.$t("menuManagement.columns.operations.edit")),1)]),_:2},1032,["onClick"])]),_:1},8,["title"])]),_:1},8,["selectedKeys","loading","data","row-selection"])):Q("",!0)]),_:1},8,["title"]),e(ne,{key:"2",title:a.$t("menu.card.tabTwo")},{default:l(()=>[i.value==2?(_(),M(x,{key:0,style:{"margin-bottom":"16px"}},{default:l(()=>[e(Z,{span:16},{default:l(()=>[e(K,null,{default:l(()=>[e(b,{type:"primary",onClick:n[2]||(n[2]=t=>A(i.value))},{icon:l(()=>[e(S)]),default:l(()=>[v(" "+g(a.$t("menuManagement.operation.create")),1)]),_:1}),e(Y,{"popup-visible":L.value,content:a.$t("menuManagement.button.confirmation.delete"),onOk:J,onCancel:w},{default:l(()=>[e(b,{type:"primary",onClick:j},{icon:l(()=>[e(q)]),default:l(()=>[v(" "+g(a.$t("menuManagement.operation.delete")),1)]),_:1})]),_:1},8,["popup-visible","content"])]),_:1})]),_:1})]),_:1})):Q("",!0),i.value==2?(_(),M(te,{key:1,selectedKeys:s.value,"onUpdate:selectedKeys":n[3]||(n[3]=t=>s.value=t),"row-key":"id",loading:T(V),data:h.value,bordered:!1,"row-selection":T(k),pagination:!1},{columns:l(()=>[e(f,{title:a.$t("menuManagement.columns.type"),"data-index":"type"},{cell:l(({record:t})=>[v(g(a.$t(`menuManagement.form.type.${t.type}`)),1)]),_:1},8,["title"]),e(f,{title:a.$t("menuManagement.columns.name"),"data-index":"name"},null,8,["title"]),e(f,{title:a.$t("menuManagement.columns.identify"),"data-index":"identify"},null,8,["title"]),e(f,{title:a.$t("menuManagement.columns.uri"),"data-index":"uri"},null,8,["title"]),e(f,{title:a.$t("menuManagement.columns.isMenu"),"data-index":"isMenu"},{cell:l(({record:t})=>[v(g(a.$t(`menuManagement.form.isMenu.${t.isMenu}`)),1)]),_:1},8,["title"]),e(f,{title:a.$t("menuManagement.columns.icon"),"data-index":"icon"},null,8,["title"]),e(f,{title:a.$t("menuManagement.columns.status"),"data-index":"status"},{cell:l(({record:t})=>[e(K,null,{default:l(()=>[e(z,{modelValue:t.status,"onUpdate:modelValue":B=>t.status=B,loading:C.value,"checked-value":1,"unchecked-value":0,onChange:B=>X(t)},{"checked-icon":l(()=>[e(ee)]),"unchecked-icon":l(()=>[e(ae)]),_:2},1032,["modelValue","onUpdate:modelValue","loading","onChange"])]),_:2},1024)]),_:1},8,["title"]),e(f,{title:a.$t("menuManagement.columns.operations"),"data-index":"operations"},{cell:l(({record:t})=>[e(b,{status:"success",size:"small",onClick:B=>H(t)},{icon:l(()=>[e(le)]),default:l(()=>[v(" "+g(a.$t("menuManagement.columns.operations.edit")),1)]),_:2},1032,["onClick"])]),_:1},8,["title"])]),_:1},8,["selectedKeys","loading","data","row-selection"])):Q("",!0)]),_:1},8,["title"])]),_:1},8,["modelValue"])]),_:1},8,["title"]),e(Ve,{visible:F.value,"onUpdate:visible":n[22]||(n[22]=t=>F.value=t),width:"auto",title:R.value==="add"?a.$t("menuManagement.form.title.add"):a.$t("menuManagement.form.title.edit"),footer:!1},{default:l(()=>[e(ke,{ref_key:"formRef",ref:E,model:o.value,style:{width:"600px"},onSubmit:fe},{default:l(()=>[e(c,{field:"type",label:a.$t("menuManagement.form.type"),rules:[{required:!0,message:a.$t("menuManagement.form.placeholder.select")}]},{default:l(()=>[e(ye,{modelValue:o.value.type,"onUpdate:modelValue":n[5]||(n[5]=t=>o.value.type=t),options:T(P),placeholder:a.$t("menuManagement.form.placeholder.select")},null,8,["modelValue","options","placeholder"])]),_:1},8,["label","rules"]),Pe(e(c,{field:"id"},{default:l(()=>[e(O,{modelValue:o.value.id,"onUpdate:modelValue":n[6]||(n[6]=t=>o.value.id=t)},null,8,["modelValue"])]),_:1},512),[[je,!1]]),e(c,{field:"name",label:a.$t("menuManagement.form.name"),rules:[{required:!0,message:a.$t("menuManagement.form.placeholder.input")}],"validate-trigger":["change","input"]},{default:l(()=>[e(O,{modelValue:o.value.name,"onUpdate:modelValue":n[7]||(n[7]=t=>o.value.name=t),placeholder:a.$t("menuManagement.form.placeholder.input")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(c,{field:"appName",label:a.$t("menuManagement.form.appName"),rules:[{required:!0,message:a.$t("menuManagement.form.placeholder.input")}],"validate-trigger":["change","input"]},{default:l(()=>[e(O,{modelValue:o.value.appName,"onUpdate:modelValue":n[8]||(n[8]=t=>o.value.appName=t),placeholder:a.$t("menuManagement.form.placeholder.input")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(c,{field:"pid",label:a.$t("menuManagement.form.pid")},{default:l(()=>[e(be,{modelValue:o.value.pid,"onUpdate:modelValue":n[9]||(n[9]=t=>o.value.pid=t),"allow-search":!0,"allow-clear":!0,data:D.value,"fallback-option":a.fallback,placeholder:a.$t("menuManagement.form.placeholder.select"),onChange:ve},null,8,["modelValue","data","fallback-option","placeholder"])]),_:1},8,["label"]),e(c,{field:"uri",label:a.$t("menuManagement.form.uri"),rules:[{required:!0,message:a.$t("menuManagement.form.placeholder.input")}],"validate-trigger":["change","input"]},{default:l(()=>[e(O,{modelValue:o.value.uri,"onUpdate:modelValue":n[10]||(n[10]=t=>o.value.uri=t),placeholder:a.$t("menuManagement.form.placeholder.input")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(c,{field:"identify",label:a.$t("menuManagement.form.identify"),rules:[{required:!0,message:a.$t("menuManagement.form.placeholder.input")}],"validate-trigger":["change","input"]},{default:l(()=>[e(O,{modelValue:o.value.identify,"onUpdate:modelValue":n[11]||(n[11]=t=>o.value.identify=t),placeholder:a.$t("menuManagement.form.placeholder.input")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(c,{field:"isMenu",label:a.$t("menuManagement.form.isMenu")},{default:l(()=>[e(z,{modelValue:o.value.isMenu,"onUpdate:modelValue":n[12]||(n[12]=t=>o.value.isMenu=t),"checked-value":1,"unchecked-value":0},null,8,["modelValue"])]),_:1},8,["label"]),e(c,{field:"scopes",label:a.$t("menuManagement.form.scopes")},{default:l(()=>[e(K,{size:"large"},{default:l(()=>[e(Me,{modelValue:o.value.scopes,"onUpdate:modelValue":n[13]||(n[13]=t=>o.value.scopes=t)},{default:l(()=>[e(oe,{value:"admin",disabled:!0},{default:l(()=>[v(g(a.$t("menuManagement.form.scopes.admin")),1)]),_:1}),e(oe,{value:"member",disabled:!0},{default:l(()=>[v(g(a.$t("menuManagement.form.scopes.member")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["label"]),e(c,{field:"icon",label:a.$t("menuManagement.form.icon")},{default:l(()=>[e(aa,{value:o.value.icon,"onUpdate:value":n[14]||(n[14]=t=>o.value.icon=t)},null,8,["value"])]),_:1},8,["label"]),e(c,{field:"urlQuery",label:a.$t("menuManagement.form.urlQuery")},{default:l(()=>[e(O,{modelValue:o.value.urlQuery,"onUpdate:modelValue":n[15]||(n[15]=t=>o.value.urlQuery=t),placeholder:a.$t("menuManagement.form.placeholder.input")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(c,{field:"target",label:a.$t("menuManagement.form.target")},{default:l(()=>[e(O,{modelValue:o.value.target,"onUpdate:modelValue":n[16]||(n[16]=t=>o.value.target=t),placeholder:a.$t("menuManagement.form.placeholder.input")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),i.value!=="1"?(_(),M(c,{key:0,field:"checkProduct",label:a.$t("menuManagement.form.checkProduct")},{default:l(()=>[e(z,{modelValue:o.value.checkProduct,"onUpdate:modelValue":n[17]||(n[17]=t=>o.value.checkProduct=t),"checked-value":1,"unchecked-value":0},null,8,["modelValue"])]),_:1},8,["label"])):Q("",!0),e(c,{field:"sort",label:a.$t("menuManagement.form.sort")},{default:l(()=>[e($e,{modelValue:o.value.sort,"onUpdate:modelValue":n[18]||(n[18]=t=>o.value.sort=t),placeholder:a.$t("menuManagement.form.placeholder.input"),min:0,mode:"button"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(c,{field:"status",label:a.$t("menuManagement.form.status")},{default:l(()=>[e(z,{modelValue:o.value.status,"onUpdate:modelValue":n[19]||(n[19]=t=>o.value.status=t),"checked-value":1,"unchecked-value":0},null,8,["modelValue"])]),_:1},8,["label"]),e(c,{field:"remark",label:a.$t("menuManagement.form.remark")},{default:l(()=>[e(he,{modelValue:o.value.remark,"onUpdate:modelValue":n[20]||(n[20]=t=>o.value.remark=t),placeholder:a.$t("menuManagement.form.placeholder.input")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(c,null,{default:l(()=>[e(K,null,{default:l(()=>[e(b,{type:"primary","html-type":"submit"},{default:l(()=>[v(g(a.$t("menuManagement.button.submit")),1)]),_:1}),e(b,{type:"outline",onClick:n[21]||(n[21]=t=>a.$refs.formRef.resetFields())},{default:l(()=>[v(g(a.$t("menuManagement.button.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"])])}}}));var ma=pe(na,[["__scopeId","data-v-86ef33fc"]]);export{ma as default};
