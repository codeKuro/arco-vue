var H=Object.defineProperty,M=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var I=(i,n,l)=>n in i?H(i,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[n]=l,N=(i,n)=>{for(var l in n||(n={}))G.call(n,l)&&I(i,l,n[l]);if(P)for(var l of P(n))Z.call(n,l)&&I(i,l,n[l]);return i},W=(i,n)=>M(i,R(n));import{d as E,r as u,e as s,o as F,c as S,w as o,f as e,L as C,i as A,t as w,u as y,b as J,a as K,g as Q}from"./vendor.e6e9099f.js";import{q as U,u as X,a as Y,b as tt,c as et}from"./visualization.ceda90c4.js";import{u as D}from"./loading.3e447ed2.js";import{u as O}from"./chart-option.e062bf69.js";import{_ as k}from"./index.525cc014.js";const at={class:"content-wrap"},ot={class:"content"},nt={class:"desc"},lt={class:"chart"},st=E({props:{title:{type:String,default:""},quota:{type:String,default:""},chartType:{type:String,default:""},cardStyle:{type:Object,default:()=>({})}},setup(i){const n=i,l=()=>{const _=u([]),{chartOption:f}=O(()=>({grid:{left:0,right:0,top:10,bottom:0},xAxis:{type:"category",show:!1},yAxis:{show:!1},tooltip:{show:!0,trigger:"axis"},series:{name:"total",data:_,type:"bar",barWidth:7,itemStyle:{borderRadius:2}}}));return{data:_,chartOption:f}},p=()=>{const _=u([[],[]]),{chartOption:f}=O(()=>({grid:{left:0,right:0,top:10,bottom:0},xAxis:{type:"category",show:!1},yAxis:{show:!1},tooltip:{show:!0,trigger:"axis"},series:[{name:"2001",data:_.value[0],type:"line",showSymbol:!1,smooth:!0,lineStyle:{color:"#165DFF",width:3}},{name:"2002",data:_.value[1],type:"line",showSymbol:!1,smooth:!0,lineStyle:{color:"#6AA1FF",width:3,type:"dashed"}}]}));return{data:_,chartOption:f}},c=()=>{const _=u([]),{chartOption:f}=O(()=>({grid:{left:0,right:0,top:0,bottom:0},legend:{show:!0,top:"center",right:"0",orient:"vertical",icon:"circle",itemWidth:6,itemHeight:6,textStyle:{color:"#4E5969"}},tooltip:{show:!0},series:[{name:"\u603B\u8BA1",type:"pie",radius:["50%","70%"],label:{show:!1},data:_}]}));return{data:_,chartOption:f}},{loading:r,setLoading:h}=D(!0),{chartOption:v,data:m}=p(),{chartOption:$,data:a}=l(),{chartOption:t,data:d}=c(),x=u({count:0,growth:0,chartData:[]}),b=u({});return(async _=>{try{const{data:f}=await U(_);x.value=f;const{chartData:B}=f;n.chartType==="bar"?(B.forEach((g,q)=>{a.value.push({value:g.y,itemStyle:{color:q%2?"#2CAB40":"#86DF6C"}})}),b.value=$.value):n.chartType==="line"?(B.forEach(g=>{g.name==="2021"?m.value[0].push(g.y):m.value[1].push(g.y)}),b.value=v.value):(B.forEach(g=>{d.value.push(g)}),b.value=t.value)}catch{}finally{h(!1)}})({quota:n.quota}),(_,f)=>{const B=s("a-statistic"),g=s("a-typography-text"),q=s("icon-arrow-rise"),j=s("Chart"),T=s("a-card"),V=s("a-spin");return F(),S(V,{loading:y(r),style:{width:"100%"}},{default:o(()=>[e(T,{bordered:!1,style:K(i.cardStyle)},{default:o(()=>[C("div",at,[C("div",ot,[e(B,{title:i.title,value:x.value.count,"value-from":0,animation:"","show-group-separator":""},null,8,["title","value"]),C("div",nt,[e(g,{type:"secondary",class:"label"},{default:o(()=>[A(w(_.$t("dataAnalysis.card.yesterday")),1)]),_:1}),e(g,{type:"danger"},{default:o(()=>[A(w(x.value.growth)+" ",1),e(q)]),_:1})])]),C("div",lt,[y(r)?J("",!0):(F(),S(j,{key:0,option:b.value},null,8,["option"]))])])]),_:1},8,["style"])]),_:1},8,["loading"])}}});var L=k(st,[["__scopeId","data-v-c8c4ab9a"]]);const rt=E({setup(i){const{isDark:n}=X();return(l,p)=>{const c=s("a-grid-item"),r=s("a-grid"),h=s("a-card");return F(),S(h,{class:"general-card",title:l.$t("dataAnalysis.title.publicOpinion"),"header-style":{paddingBottom:"12px"}},{default:o(()=>[e(r,{cols:24,"col-gap":12,"row-gap":12},{default:o(()=>[e(c,{span:{xs:12,sm:12,md:12,lg:12,xl:6,xxl:6}},{default:o(()=>[e(L,{title:l.$t("dataAnalysis.card.title.allVisitors"),quota:"visitors","chart-type":"line","card-style":{background:y(n)?"linear-gradient(180deg, #284991 0%, #122B62 100%)":"linear-gradient(180deg, #f2f9fe 0%, #e6f4fe 100%)"}},null,8,["title","card-style"])]),_:1}),e(c,{span:{xs:12,sm:12,md:12,lg:12,xl:6,xxl:6}},{default:o(()=>[e(L,{title:l.$t("dataAnalysis.card.title.contentPublished"),quota:"published","chart-type":"bar","card-style":{background:y(n)?" linear-gradient(180deg, #3D492E 0%, #263827 100%)":"linear-gradient(180deg, #F5FEF2 0%, #E6FEEE 100%)"}},null,8,["title","card-style"])]),_:1}),e(c,{span:{xs:12,sm:12,md:12,lg:12,xl:6,xxl:6}},{default:o(()=>[e(L,{title:l.$t("dataAnalysis.card.title.totalComment"),quota:"comment","chart-type":"line","card-style":{background:y(n)?"linear-gradient(180deg, #294B94 0%, #0F275C 100%)":"linear-gradient(180deg, #f2f9fe 0%, #e6f4fe 100%)"}},null,8,["title","card-style"])]),_:1}),e(c,{span:{xs:12,sm:12,md:12,lg:12,xl:6,xxl:6}},{default:o(()=>[e(L,{title:l.$t("dataAnalysis.card.title.totalShare"),quota:"share","chart-type":"pie","card-style":{background:y(n)?"linear-gradient(180deg, #312565 0%, #201936 100%)":"linear-gradient(180deg, #F7F7FF 0%, #ECECFF 100%)"}},null,8,["title","card-style"])]),_:1})]),_:1})]),_:1},8,["title"])}}});const it=E({setup(i){const n=a=>a.map(t=>`<div class="content-panel">
        <p>
          <span style="background-color: ${t.color}" class="tooltip-item-icon"></span>
          <span>${t.seriesName}</span>
        </p>
        <span class="tooltip-value">
        ${t.value}%
        </span>
      </div>`).join(""),{loading:l,setLoading:p}=D(!0),c=u([]),r=u([]),h=u([]),v=u([]),{chartOption:m}=O(a=>({grid:{left:"40",right:0,top:"20",bottom:"100"},legend:{bottom:0,icon:"circle",textStyle:{color:"#4E5969"}},xAxis:{type:"category",data:c.value,boundaryGap:!1,axisLine:{lineStyle:{color:a?"#3f3f3f":"#A9AEB8"}},axisTick:{show:!0,alignWithLabel:!0,lineStyle:{color:"#86909C"},interval(t){return!(t===0||t===c.value.length-1)}},axisLabel:{color:"#86909C",formatter(t,d){return d===0||d===c.value.length-1?"":`${t}`}}},yAxis:{type:"value",axisLabel:{color:"#86909C",formatter:"{value}%"},splitLine:{lineStyle:{color:a?"#3F3F3F":"#E5E6EB"}}},tooltip:{show:!0,trigger:"axis",formatter(t){const[d]=t;return`<div>
            <p class="tooltip-title">${d.axisValueLabel}</p>
            ${n(t)}
          </div>`},className:"echarts-tooltip-diy"},series:[{name:"\u7EAF\u6587\u672C",data:r.value,type:"line",smooth:!0,showSymbol:!1,color:a?"#3D72F6":"#246EFF",symbol:"circle",symbolSize:10,emphasis:{focus:"series",itemStyle:{borderWidth:2,borderColor:"#E0E3FF"}}},{name:"\u56FE\u6587\u7C7B",data:h.value,type:"line",smooth:!0,showSymbol:!1,color:a?"#A079DC":"#00B2FF",symbol:"circle",symbolSize:10,emphasis:{focus:"series",itemStyle:{borderWidth:2,borderColor:"#E2F2FF"}}},{name:"\u89C6\u9891\u7C7B",data:v.value,type:"line",smooth:!0,showSymbol:!1,color:a?"#6CAAF5":"#81E2FF",symbol:"circle",symbolSize:10,emphasis:{focus:"series",itemStyle:{borderWidth:2,borderColor:"#D9F6FF"}}}],dataZoom:[{bottom:40,type:"slider",left:40,right:14,height:14,borderColor:"transparent",handleIcon:"image://http://p3-armor.byteimg.com/tos-cn-i-49unhts6dw/1ee5a8c6142b2bcf47d2a9f084096447.svg~tplv-49unhts6dw-image.image",handleSize:"20",handleStyle:{shadowColor:"rgba(0, 0, 0, 0.2)",shadowBlur:4},brushSelect:!1,backgroundColor:a?"#313132":"#F2F3F5"},{type:"inside",start:0,end:100,zoomOnMouseWheel:!1}]}));return(async()=>{p(!0);try{const{data:a}=await Y();c.value=a.xAxis,a.data.forEach(t=>{t.name==="\u7EAF\u6587\u672C"?r.value=t.value:t.name==="\u56FE\u6587\u7C7B"&&(h.value=t.value),v.value=t.value})}catch{}finally{p(!1)}})(),(a,t)=>{const d=s("Chart"),x=s("a-card"),b=s("a-spin");return F(),S(b,{loading:y(l),style:{width:"100%"}},{default:o(()=>[e(x,{class:"general-card","header-style":{paddingBottom:"16px"}},{title:o(()=>[A(w(a.$t("dataAnalysis.contentPeriodAnalysis")),1)]),default:o(()=>[e(d,{style:{width:"100%",height:"370px"},option:y(m)},null,8,["option"])]),_:1})]),_:1},8,["loading"])}}});var ct=k(it,[["__scopeId","data-v-55a814a0"]]);const dt=E({setup(i){const n=a=>a.map(t=>`<div class="content-panel">
    <p>
      <span style="background-color: ${t.color}" class="tooltip-item-icon"></span>
      <span>
      ${t.seriesName}
      </span>
    </p>
    <span class="tooltip-value">
      ${Number(t.value).toLocaleString()}
    </span>
  </div>`).join(""),{loading:l,setLoading:p}=D(!0),c=u([]),r=u([]),h=u([]),v=u([]),{chartOption:m}=O(a=>({grid:{left:"4%",right:0,top:"20",bottom:"60"},legend:{bottom:0,icon:"circle",textStyle:{color:"#4E5969"}},xAxis:{type:"category",data:c.value,axisLine:{lineStyle:{color:a?"#3f3f3f":"#A9AEB8"}},axisTick:{show:!0,alignWithLabel:!0,lineStyle:{color:"#86909C"}},axisLabel:{color:"#86909C"}},yAxis:{type:"value",axisLabel:{color:"#86909C",formatter(t,d){return d===0?`${t}`:`${t/1e3}k`}},splitLine:{lineStyle:{color:a?"#3F3F3F":"#E5E6EB"}}},tooltip:{show:!0,trigger:"axis",formatter(t){const[d]=t;return`<div>
            <p class="tooltip-title">${d.axisValueLabel}</p>
            ${n(t)}
          </div>`},className:"echarts-tooltip-diy"},series:[{name:"\u7EAF\u6587\u672C",data:r.value,stack:"one",type:"bar",barWidth:16,color:a?"#4A7FF7":"#246EFF"},{name:"\u56FE\u6587\u7C7B",data:h.value,stack:"one",type:"bar",color:a?"#085FEF":"#00B2FF"},{name:"\u89C6\u9891\u7C7B",data:v.value,stack:"one",type:"bar",color:a?"#01349F":"#81E2FF",itemStyle:{borderRadius:2}}]}));return(async()=>{p(!0);try{const{data:a}=await tt();c.value=a[0].x,a.forEach(t=>{t.name==="\u7EAF\u6587\u672C"?r.value=t.y:t.name==="\u56FE\u6587\u7C7B"&&(h.value=t.y),v.value=t.y})}catch{}finally{p(!1)}})(),(a,t)=>{const d=s("a-link"),x=s("Chart"),b=s("a-card"),z=s("a-spin");return F(),S(z,{loading:y(l),style:{width:"100%"}},{default:o(()=>[e(b,{class:"general-card","header-style":{paddingBottom:"14px"}},{title:o(()=>[A(w(a.$t("dataAnalysis.contentPublishRatio")),1)]),extra:o(()=>[e(d,null,{default:o(()=>[A(w(a.$t("workplace.viewMore")),1)]),_:1})]),default:o(()=>[e(x,{style:{width:"100%",height:"347px"},option:y(m)},null,8,["option"])]),_:1})]),_:1},8,["loading"])}}});const ut=E({setup(i){const{loading:n,setLoading:l}=D(),p=u({list:[]});return(async()=>{try{l(!0);const{data:r}=await et();p.value=r}catch{}finally{l(!1)}})(),(r,h)=>{const v=s("a-link"),m=s("a-table-column"),$=s("a-table"),a=s("a-card"),t=s("a-spin");return F(),S(t,{loading:y(n),style:{width:"100%"}},{default:o(()=>[e(a,{class:"general-card","header-style":{paddingBottom:"14px"}},{title:o(()=>[A(w(r.$t("dataAnalysis.popularAuthor")),1)]),extra:o(()=>[e(v,null,{default:o(()=>[A(w(r.$t("workplace.viewMore")),1)]),_:1})]),default:o(()=>[e($,{data:p.value.list,pagination:!1,bordered:!1,style:{"margin-bottom":"20px"},scroll:{x:"100%",y:"350px"}},{columns:o(()=>[e(m,{title:r.$t("dataAnalysis.popularAuthor.column.ranking"),"data-index":"ranking"},null,8,["title"]),e(m,{title:r.$t("dataAnalysis.popularAuthor.column.author"),"data-index":"author"},null,8,["title"]),e(m,{title:r.$t("dataAnalysis.popularAuthor.column.content"),"data-index":"contentCount",sortable:{sortDirections:["ascend","descend"]}},null,8,["title"]),e(m,{title:r.$t("dataAnalysis.popularAuthor.column.click"),"data-index":"clickCount",sortable:{sortDirections:["ascend","descend"]}},null,8,["title"])]),_:1},8,["data"])]),_:1})]),_:1},8,["loading"])}}});var pt=k(ut,[["__scopeId","data-v-74a66893"]]);const ht={class:"container"},_t={class:"space-unit"},mt={name:"DataAnalysis"},yt=E(W(N({},mt),{setup(i){return(n,l)=>{const p=s("Breadcrumb"),c=s("a-grid-item"),r=s("a-grid"),h=s("a-space");return F(),Q("div",ht,[e(p,{items:["menu.visualization","menu.visualization.dataAnalysis"]},null,8,["items"]),e(h,{direction:"vertical",size:12,fill:""},{default:o(()=>[e(h,{direction:"vertical",size:16,fill:""},{default:o(()=>[C("div",_t,[e(rt)]),C("div",null,[e(r,{cols:24,"col-gap":16,"row-gap":16},{default:o(()=>[e(c,{span:{xs:24,sm:24,md:24,lg:24,xl:16,xxl:16}},{default:o(()=>[e(dt)]),_:1}),e(c,{span:{xs:24,sm:24,md:24,lg:24,xl:8,xxl:8}},{default:o(()=>[e(pt)]),_:1})]),_:1})]),C("div",null,[e(ct)])]),_:1})]),_:1})])}}}));var Ct=k(yt,[["__scopeId","data-v-0dc3be66"]]);export{Ct as default};
