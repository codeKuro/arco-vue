var we=Object.defineProperty,Me=Object.defineProperties;var Te=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var Be=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable;var ee=(n,t,r)=>t in n?we(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,V=(n,t)=>{for(var r in t||(t={}))Be.call(t,r)&&ee(n,r,t[r]);if(Q)for(var r of Q(t))je.call(t,r)&&ee(n,r,t[r]);return n},te=(n,t)=>Me(n,Te(t));import{a as X,_ as A,u as ne,b as P,cU as De,cV as Ie,cW as Ee,cX as oe,cY as se,cZ as Fe,c_ as Re,c$ as ae}from"./index.66d117c3.js";import{F as Ae}from"./index.ea862743.js";import{aR as Pe,d as I,aJ as B,A as i,aC as m,aF as e,aG as o,E as _,aL as M,aM as w,C as Y,B as j,aH as K,D as O,aD as D,bX as ze,aI as W,bA as Ue,bt as ce,bB as Ve,b3 as re,by as Ne,bU as Ke,bV as Oe,b2 as We,bW as qe,e as E,r as He,t as Je,c as $,u as f,ba as Xe,bh as Ye,aS as ie,bi as Ze,bx as Ge,i as Qe,b7 as le,b8 as ue,br as et,bY as tt,bZ as nt,b_ as ot,b$ as st,bR as at,c0 as ct,c1 as rt,h as de,bE as _e,c2 as it,c3 as lt,w as pe,c4 as ut,c5 as dt,o as _t,c6 as pt,c7 as ft,bz as fe,bH as gt,c8 as vt,p as ht,bb as mt,bp as yt,c9 as bt,aU as kt,ca as xt,cb as Ct}from"./arco.a53b75be.js";import{f as q,i as $t,j as Lt,h as St,k as wt,l as Mt}from"./vue.0de19953.js";/* empty css                *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css               */import{a as Tt,s as Bt}from"./message.b94f3d43.js";import{u as jt}from"./loading.c387c5f5.js";/* empty css              *//* empty css               *//* empty css                *//* empty css               *//* empty css                *//* empty css               */import"./chart.da3854a0.js";function Dt(){const n=q(),t=X();return{logout:async d=>{await t.logout();const p=n.currentRoute.value;Pe.success("\u767B\u51FA\u6210\u529F"),n.push({name:d&&typeof d=="string"?d:"login",query:te(V({},n.currentRoute.value.query),{redirect:p.name})})}}}const It=M("\u672A\u5F00\u59CB"),Et=M("\u5DF2\u5F00\u901A"),Ft=M("\u8FDB\u884C\u4E2D"),Rt=M("\u5373\u5C06\u5230\u671F"),At=["onClick"],Pt=["src"],zt={class:"footer-wrap"},Ut={class:"footer-wrap"},Vt=I({props:{renderList:{type:Array,required:!0},unreadCount:{type:Number,default:0}},emits:["itemClick"],setup(n,{emit:t}){const r=n,d=()=>{t("itemClick",[...r.renderList])},p=g=>{g.status||t("itemClick",[g])},l=3;return(g,y)=>{const L=Ue,a=B("icon-desktop"),c=ce,v=Ve,b=re,s=Ne,S=Ke,u=Oe,C=We,h=qe;return i(),m(h,{bordered:!1},{footer:e(()=>[o(b,{fill:"",size:0,class:Y({"add-border-top":n.renderList.length<l})},{default:e(()=>[_("div",zt,[o(C,{onClick:d},{default:e(()=>[M(w(g.$t("messageBox.allRead")),1)]),_:1})]),_("div",Ut,[o(C,null,{default:e(()=>[M(w(g.$t("messageBox.viewMore")),1)]),_:1})])]),_:1},8,["class"])]),default:e(()=>[(i(!0),j(W,null,K(n.renderList,k=>(i(),m(u,{key:k.id,"action-layout":"vertical",style:O({opacity:k.status?.5:1})},{extra:e(()=>[k.messageType===0?(i(),m(L,{key:0,color:"gray"},{default:e(()=>[It]),_:1})):k.messageType===1?(i(),m(L,{key:1,color:"green"},{default:e(()=>[Et]),_:1})):k.messageType===2?(i(),m(L,{key:2,color:"blue"},{default:e(()=>[Ft]),_:1})):k.messageType===3?(i(),m(L,{key:3,color:"red"},{default:e(()=>[Rt]),_:1})):D("",!0)]),default:e(()=>[_("div",{class:"item-wrap",onClick:F=>p(k)},[o(S,null,ze({title:e(()=>[o(b,{size:4},{default:e(()=>[_("span",null,w(k.title),1),o(v,{type:"secondary"},{default:e(()=>[M(w(k.subTitle),1)]),_:2},1024)]),_:2},1024)]),description:e(()=>[_("div",null,[o(s,{ellipsis:{rows:1}},{default:e(()=>[M(w(k.content),1)]),_:2},1024),k.type==="message"?(i(),m(v,{key:0,class:"time-text"},{default:e(()=>[M(w(k.time),1)]),_:2},1024)):D("",!0)])]),_:2},[k.avatar?{name:"avatar",fn:e(()=>[o(c,{shape:"circle"},{default:e(()=>[k.avatar?(i(),j("img",{key:0,src:k.avatar},null,8,Pt)):(i(),m(a,{key:1}))]),_:2},1024)])}:void 0]),1024)],8,At)]),_:2},1032,["style"]))),128)),n.renderList.length&&n.renderList.length<3?(i(),j("div",{key:0,style:O({height:(l-n.renderList.length)*86+"px"})},null,4)):D("",!0)]),_:1})}}});var Nt=A(Vt,[["__scopeId","data-v-da998396"]]);const Kt=I({setup(n){const{loading:t,setLoading:r}=jt(!0),d=E("message"),{t:p}=ne(),l=He({renderList:[],messageList:[]});Je(l);const g=[{key:"message",title:p("messageBox.tab.title.message")},{key:"notice",title:p("messageBox.tab.title.notice")},{key:"todo",title:p("messageBox.tab.title.todo")}];async function y(){r(!0);try{const{data:u}=await Tt();l.messageList=u}catch{}finally{r(!1)}}async function L(u){const C=u.map(h=>h.id);await Bt({ids:C}),y()}const a=$(()=>l.messageList.filter(u=>d.value===u.type)),c=$(()=>a.value.filter(u=>!u.status).length),v=u=>l.messageList.filter(h=>h.type===u&&!h.status),b=u=>{const C=v(u);return C.length?`(${C.length})`:""},s=u=>{a.value.length&&L([...u])},S=()=>{l.messageList=[]};return y(),(u,C)=>{const h=Xe,k=Ye,F=ie,x=Ze,R=Ge;return i(),m(R,{style:{display:"block"},loading:f(t)},{default:e(()=>[o(x,{activeKey:d.value,"onUpdate:activeKey":C[0]||(C[0]=T=>d.value=T),type:"rounded","destroy-on-hide":""},{extra:e(()=>[o(F,{type:"text",onClick:S},{default:e(()=>[M(w(u.$t("messageBox.tab.button")),1)]),_:1})]),default:e(()=>[(i(),j(W,null,K(g,T=>o(k,{key:T.key},{title:e(()=>[_("span",null,w(T.title)+w(b(T.key)),1)]),default:e(()=>[f(a).length?D("",!0):(i(),m(h,{key:0,status:"404"},{subtitle:e(()=>[M(w(u.$t("messageBox.noContent")),1)]),_:1})),o(Nt,{"render-list":f(a),"unread-count":f(c),onItemClick:s},null,8,["render-list","unread-count"])]),_:2},1024)),64))]),_:1},8,["activeKey"])]),_:1},8,["loading"])}}});var Ot=A(Kt,[["__scopeId","data-v-cfab683a"]]);const Wt=n=>(le("data-v-b9a902ae"),n=n(),ue(),n),qt={class:"navbar"},Ht={class:"left-side"},Jt=Wt(()=>_("img",{alt:"logo",src:"//p3-armor.byteimg.com/tos-cn-i-49unhts6dw/dfdba5317c0c20ce20e64fac803d52bc.svg~tplv-49unhts6dw-image.image"},null,-1)),Xt=M(" milimili "),Yt={class:"right-side"},Zt={class:"message-box-trigger"},Gt=["src"],Qt=I({setup(n){const t=P(),r=X(),{logout:d}=Dt(),{changeLocale:p}=De(),{isFullscreen:l,toggle:g}=$t(),y=[...Ie],L=$(()=>r.avatar),a=$(()=>t.theme),c=Lt({selector:"body",attribute:"arco-theme",valueDark:"dark",valueLight:"light",storageKey:"arco-theme",onChanged(x){t.toggleTheme(x)}}),v=St(c),b=()=>{v()},s=()=>{t.updateSettings({globalSettings:!0})},S=E(),u=E(),C=()=>{const x=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});S.value.dispatchEvent(x)},h=()=>{d()},k=()=>{const x=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});u.value.dispatchEvent(x)},F=Qe("toggleDrawerMenu");return(x,R)=>{const T=et,ve=B("icon-menu-fold"),H=re,he=B("icon-language"),z=ie,U=tt,J=nt,Z=ot,me=B("icon-moon-fill"),ye=B("icon-sun-fill"),be=B("icon-notification"),ke=st,xe=at,Ce=B("icon-fullscreen-exit"),$e=B("icon-fullscreen"),G=B("icon-settings"),Le=ce,Se=B("icon-export");return i(),j("div",qt,[_("div",Ht,[o(H,null,{default:e(()=>[Jt,o(T,{style:{margin:0,fontSize:"18px"},heading:5},{default:e(()=>[Xt]),_:1}),f(t).device==="mobile"?(i(),m(ve,{key:0,style:{"font-size":"22px",cursor:"pointer"},onClick:f(F)},null,8,["onClick"])):D("",!0)]),_:1})]),_("ul",Yt,[_("li",null,[o(U,{content:x.$t("settings.language")},{default:e(()=>[o(z,{class:"nav-btn",type:"outline",shape:"circle",onClick:k},{icon:e(()=>[o(he)]),_:1})]),_:1},8,["content"]),o(Z,{trigger:"click",onSelect:f(p)},{content:e(()=>[(i(),j(W,null,K(y,N=>o(J,{key:N.value,value:N.value},{default:e(()=>[M(w(N.label),1)]),_:2},1032,["value"])),64))]),default:e(()=>[_("div",{ref_key:"triggerBtn",ref:u,class:"trigger-btn"},null,512)]),_:1},8,["onSelect"])]),_("li",null,[o(U,{content:f(a)==="light"?x.$t("settings.navbar.theme.toDark"):x.$t("settings.navbar.theme.toLight")},{default:e(()=>[o(z,{class:"nav-btn",type:"outline",shape:"circle",onClick:b},{icon:e(()=>[f(a)==="dark"?(i(),m(me,{key:0})):(i(),m(ye,{key:1}))]),_:1})]),_:1},8,["content"])]),_("li",null,[o(U,{content:x.$t("settings.navbar.alerts")},{default:e(()=>[_("div",Zt,[o(ke,{count:9,dot:""},{default:e(()=>[o(z,{class:"nav-btn",type:"outline",shape:"circle",onClick:C},{default:e(()=>[o(be)]),_:1})]),_:1})])]),_:1},8,["content"]),o(xe,{trigger:"click","arrow-style":{display:"none"},"content-style":{padding:0,minWidth:"400px"},"content-class":"message-popover"},{content:e(()=>[o(Ot)]),default:e(()=>[_("div",{ref_key:"refBtn",ref:S,class:"ref-btn"},null,512)]),_:1})]),_("li",null,[o(U,{content:f(l)?x.$t("settings.navbar.screen.toExit"):x.$t("settings.navbar.screen.toFull")},{default:e(()=>[o(z,{class:"nav-btn",type:"outline",shape:"circle",onClick:f(g)},{icon:e(()=>[f(l)?(i(),m(Ce,{key:0})):(i(),m($e,{key:1}))]),_:1},8,["onClick"])]),_:1},8,["content"])]),_("li",null,[o(U,{content:x.$t("settings.title")},{default:e(()=>[o(z,{class:"nav-btn",type:"outline",shape:"circle",onClick:s},{icon:e(()=>[o(G)]),_:1})]),_:1},8,["content"])]),_("li",null,[o(Z,{trigger:"click"},{content:e(()=>[o(J,null,{default:e(()=>[o(H,{onClick:R[0]||(R[0]=N=>x.$router.push({name:"Setting"}))},{default:e(()=>[o(G),_("span",null,w(x.$t("messageBox.userSettings")),1)]),_:1})]),_:1}),o(J,null,{default:e(()=>[o(H,{onClick:h},{default:e(()=>[o(Se),_("span",null,w(x.$t("messageBox.logout")),1)]),_:1})]),_:1})]),default:e(()=>[o(Le,{size:32,style:{marginRight:"8px",cursor:"pointer"}},{default:e(()=>[_("img",{alt:"avatar",src:f(L)},null,8,Gt)]),_:1})]),_:1})])])])}}});var en=A(Qt,[["__scopeId","data-v-b9a902ae"]]);const tn=[...Ee],nn=tn.map(n=>{const{name:t,path:r,meta:d,redirect:p,children:l}=n;return{name:t,path:r,meta:d,redirect:p,children:l}});function on(){const n=oe(),t=P(),r=$(()=>t.menuFromServer?t.appAsyncMenus:nn);return{menuTree:$(()=>{const p=JSON.parse(JSON.stringify(r.value));console.log(p),p.sort((g,y)=>(g.meta.order||0)-(y.meta.order||0));function l(g,y){return g?g.map(a=>{var v,b;if(!n.accessRouter(a))return null;if(((v=a.meta)==null?void 0:v.hideChildrenInMenu)||!a.children)return a.children=[],a;a.children=a.children.filter(s=>{var S;return((S=s.meta)==null?void 0:S.hideInMenu)!==!0});const c=l(a.children,y+1);return c.length||y>1?(a.children=c,a):((b=a.meta)==null?void 0:b.hideInMenu)===!1?a:null}).filter(Boolean):null}return l(p,0)})}}function sn(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!ct(n)}var an=I({emit:["collapse"],setup(){const{t:n}=ne(),t=P(),r=q(),{menuTree:d}=on(),p=$({get(){return t.device==="desktop"?t.menuCollapse:!1},set(c){t.updateSettings({menuCollapse:c})}}),l=E([]),g=E([]),y=c=>{if(Fe.test(c.path)){Re(c.path),g.value=[c.name];return}r.push({name:c.name})};se(c=>{var v;if(c.meta.requiresAuth&&!c.meta.hideInMenu){const{matched:b}=c;if(b.length>1&&b.slice(0,b.length-1).forEach(({name:s})=>{l.value.includes(s)||l.value.push(s)}),c.meta.activeMenu)g.value=[c.meta.activeMenu];else{const s=(v=b[b.length-1])==null?void 0:v.name;g.value=[s]}}},!0);const L=c=>{t.device==="desktop"&&t.updateSettings({menuCollapse:c})},a=()=>{function c(v,b=[]){return v&&v.forEach(s=>{var C;const S=((C=s==null?void 0:s.meta)==null?void 0:C.icon)?()=>{var h;return de(_e(`<${(h=s==null?void 0:s.meta)==null?void 0:h.icon}/>`))}:null,u=(s==null?void 0:s.children)&&(s==null?void 0:s.children.length)!==0?o(it,{key:s==null?void 0:s.name},{default:()=>[c(s==null?void 0:s.children)],icon:S,title:()=>{var h;return de(_e(n(((h=s==null?void 0:s.meta)==null?void 0:h.locale)||"")))}}):o(lt,{key:s==null?void 0:s.name,onClick:()=>y(s)},{default:()=>{var h;return[n(((h=s==null?void 0:s.meta)==null?void 0:h.locale)||"")]},icon:S});b.push(u)}),b}return c(d.value)};return()=>{let c;return o(rt,{collapsed:p.value,"onUpdate:collapsed":v=>p.value=v,"open-keys":l.value,"onUpdate:open-keys":v=>l.value=v,"show-collapse-button":t.device!=="mobile","auto-open":!1,"selected-keys":g.value,"auto-open-selected":!0,"level-indent":34,style:"height: 100%",onCollapse:L},sn(c=a())?c:{default:()=>[c]})}}});var ge=A(an,[["__scopeId","data-v-72f098ca"]]);const cn=n=>(le("data-v-4e2b11ca"),n=n(),ue(),n),rn={class:"tab-bar-container"},ln={class:"tab-bar-box"},un={class:"tab-bar-scroll"},dn={class:"tags-wrap"},_n=["onClick"],pn={class:"tag-link"},fn=["onClick"],gn=cn(()=>_("div",{class:"tag-bar-operation"},null,-1)),vn=I({setup(n){const t=P(),r=ae(),d=q(),p=E(),l=$(()=>r.getTabList),g=$(()=>t.navbar?60:0);pe(()=>t.navbar,()=>{p.value.updatePosition()}),se(a=>{!a.meta.noAffix&&!l.value.some(c=>c.fullPath===a.fullPath)&&r.updateTabList(a)},!0);const y=(a,c)=>{if(r.deleteTag(c,a),c===l.value.length){const v=l.value[l.value.length-1];d.push({name:v.name})}},L=a=>{d.push(V({},a))};return(a,c)=>{const v=B("icon-close"),b=dt;return i(),j("div",rn,[o(b,{ref_key:"affixRef",ref:p,"offset-top":f(g)},{default:e(()=>[_("div",ln,[_("div",un,[_("div",dn,[(i(!0),j(W,null,K(f(l),(s,S)=>(i(),j("span",{key:s.fullPath,class:Y(["arco-tag arco-tag-size-medium arco-tag-checked",{"link-activated":s.fullPath===a.$route.fullPath}]),onClick:u=>L(s)},[_("span",pn,w(a.$t(s.title)),1),_("span",{class:"arco-icon-hover arco-tag-icon-hover arco-icon-hover-size-medium arco-tag-close-btn",onClick:ut(u=>y(s,S),["stop"])},[o(v)],8,fn)],10,_n))),128))])]),gn])]),_:1},8,["offset-top"])])}}});var hn=A(vn,[["__scopeId","data-v-4e2b11ca"]]);function mn(n,t,r,d=!1){n.addEventListener&&typeof n.addEventListener=="function"&&n.addEventListener(t,r,d)}function yn(n,t,r,d=!1){n.removeEventListener&&typeof n.removeEventListener=="function"&&n.removeEventListener(t,r,d)}const bn=992;function kn(){return document.body.getBoundingClientRect().width-1<bn}function xn(n){const t=P();function r(){if(!document.hidden){const p=kn();t.toggleDevice(p?"mobile":"desktop"),t.toggleMenu(p)}}const d=wt(r,100);_t(()=>{n&&d()}),pt(()=>{mn(window,"resize",d)}),ft(()=>{yn(window,"resize",d)})}const Cn=I({setup(n){const t=ae(),r=$(()=>t.getCacheList);return(d,p)=>{const l=B("router-view");return i(),m(l,null,{default:e(({Component:g,route:y})=>[o(vt,{name:"fade",mode:"out-in",appear:""},{default:e(()=>[y.meta.ignoreCache?(i(),m(fe(g),{key:y.fullPath})):(i(),m(gt,{key:1,include:f(r)},[(i(),m(fe(g),{key:y.fullPath}))],1032,["include"]))]),_:2},1024)]),_:1})}}});const $n={key:0,class:"layout-navbar"},Ln={class:"menu-wrapper"},Sn=I({setup(n){const t=P(),r=X(),d=q(),p=Mt(),l=oe();xn(!0);const g="60px",y=$(()=>t.navbar),L=$(()=>t.menu),a=$(()=>t.hideMenu),c=$(()=>t.footer),v=$(()=>t.menuCollapse?48:t.menuWidth),b=$(()=>t.menuCollapse),s=$(()=>{const h=L.value&&!a.value?{paddingLeft:`${v.value}px`}:{},k=y.value?{paddingTop:g}:{};return V(V({},h),k)}),S=h=>{t.updateSettings({menuCollapse:h})};pe(()=>r.role,h=>{h&&!l.accessRouter(p)&&d.push({name:"notFound"})});const u=E(!1),C=()=>{u.value=!1};return ht("toggleDrawerMenu",()=>{u.value=!u.value}),(h,k)=>{const F=bt,x=kt,R=xt,T=Ct;return i(),m(T,{class:Y(["layout",{mobile:f(t).hideMenu}])},{default:e(()=>[f(y)?(i(),j("div",$n,[o(en)])):D("",!0),o(T,null,{default:e(()=>[o(T,null,{default:e(()=>[f(L)?mt((i(),m(F,{key:0,class:"layout-sider",breakpoint:"xl",collapsed:f(b),collapsible:!0,width:f(v),style:O({paddingTop:f(y)?"60px":""}),"hide-trigger":!0,onCollapse:S},{default:e(()=>[_("div",Ln,[o(ge)])]),_:1},8,["collapsed","width","style"])),[[yt,!f(a)]]):D("",!0),f(a)?(i(),m(x,{key:1,visible:u.value,placement:"left",footer:!1,"mask-closable":"",closable:!1,onCancel:C},{default:e(()=>[o(ge)]),_:1},8,["visible"])):D("",!0),o(T,{class:"layout-content",style:O(f(s))},{default:e(()=>[f(t).tabBar?(i(),m(hn,{key:0})):D("",!0),o(R,null,{default:e(()=>[o(Cn)]),_:1}),f(c)?(i(),m(Ae,{key:1})):D("",!0)]),_:1},8,["style"])]),_:1})]),_:1})]),_:1},8,["class"])}}});var Yn=A(Sn,[["__scopeId","data-v-5424861c"]]);export{Yn as default};
