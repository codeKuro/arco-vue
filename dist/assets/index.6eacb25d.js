var B=Object.defineProperty,L=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var U=(r,o,t)=>o in r?B(r,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[o]=t,q=(r,o)=>{for(var t in o||(o={}))N.call(o,t)&&U(r,t,o[t]);if(j)for(var t of j(o))R.call(o,t)&&U(r,t,o[t]);return r},x=(r,o)=>L(r,A(o));import{_ as $,a as T,u as M,cT as z,cU as J}from"./index.6eb722a8.js";/* empty css               */import{u as O}from"./loading.28115bcb.js";import{d as k,e as v,aJ as E,A as I,aC as P,aF as s,aG as a,B as D,aD as W,u as G,aL as V,aM as C,bF as H,bO as K,bP as Q,b3 as F,bj as X,aR as Y,b0 as Z,b5 as ee,b6 as ae,aS as te,b4 as oe,bd as se,be as le,bh as re,bi as ne}from"./arco.bb856b78.js";/* empty css               *//* empty css               *//* empty css              *//* empty css               */import{u as ie}from"./user-center.529e203f.js";/* empty css              */import"./chart.e89f81b2.js";import"./vue.e8f01861.js";const ue=["src"],de=k({setup(r){const o=T(),t={uid:"-2",name:"avatar.png",url:o.avatar},p=[{label:"userSetting.label.username",value:o.username},{label:"userSetting.label.nickname",value:o.nickname},{label:"userSetting.label.accountId",value:o.id},{label:"userSetting.label.phone",value:o.mobile},{label:"userSetting.label.email",value:o.email}],u=v([t]),w=(m,f)=>{u.value=[f]},b=m=>{const f=new AbortController;return async function(){const{onProgress:g,onError:e,onSuccess:l,fileItem:d,name:n="file"}=m;g(20);const _=new FormData;_.append(n,d.file);const y=i=>{let h;i.total>0&&(h=i.loaded/i.total*100),g(parseInt(String(h),10),i)};try{const i=await ie(_,{controller:f,onUploadProgress:y});l(i)}catch(i){e(i)}}(),{abort(){f.abort()}}};return(m,f)=>{const S=E("icon-camera"),g=H,e=K,l=Q,d=F,n=X;return I(),P(n,{bordered:!1},{default:s(()=>[a(d,{size:54},{default:s(()=>[a(e,{"custom-request":b,"list-type":"picture-card","file-list":u.value,"show-upload-button":!0,"show-file-list":!1,onChange:w},{"upload-button":s(()=>[a(g,{size:100,class:"info-avatar"},{"trigger-icon":s(()=>[a(S)]),default:s(()=>[u.value.length?(I(),D("img",{key:0,src:u.value[0].url},null,8,ue)):W("",!0)]),_:1})]),_:1},8,["file-list"]),a(l,{data:G(p),column:2,align:"right",layout:"inline-horizontal","label-style":{width:"140px",fontWeight:"normal",color:"rgb(var(--gray-8))"},"value-style":{width:"200px",paddingLeft:"8px",textAlign:"left"}},{label:s(({label:_})=>[V(C(m.$t(_))+" :",1)]),_:1},8,["data","label-style"])]),_:1})]),_:1})}}});var ce=$(de,[["__scopeId","data-v-553bfb1f"]]);const me=k({setup(r){const o=v(),t=v({nickname:"",password:"",mobile:"",email:""}),p=v(""),u=v(""),{loading:w,setLoading:b}=O(!0),{t:m}=M(),f=[{required:!0,message:m("userSetting.basicInfo.placeholder.password.confirm")},{validator:(e,l)=>new Promise(d=>{window.setTimeout(()=>{e!==t.value.password&&l(m("userSetting.basicInfo.placeholder.password.confirm.errMsg")),d()},100)})}],S=async()=>{b(!0);const e=JSON.parse(JSON.stringify(t.value));try{await z(e),Y.success(m("userSetting.form.edit.success"))}catch(l){u.value=l.message}finally{await J(),b(!1)}},g=async()=>{var e;await((e=o.value)==null?void 0:e.resetFields())};return(e,l)=>{const d=Z,n=ee,_=ae,y=te,i=F,h=oe;return I(),P(h,{ref_key:"formRef",ref:o,model:t.value,class:"form","label-col-props":{span:8},"wrapper-col-props":{span:16}},{default:s(()=>[a(n,{field:"nickname",label:e.$t("userSetting.basicInfo.form.label.nickname"),rules:[{required:!0,message:e.$t("userSetting.form.error.nickname.required")}]},{default:s(()=>[a(d,{modelValue:t.value.nickname,"onUpdate:modelValue":l[0]||(l[0]=c=>t.value.nickname=c),placeholder:e.$t("userSetting.basicInfo.placeholder.nickname")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(n,{field:"password",label:e.$t("userSetting.basicInfo.form.label.password"),rules:[{required:!0,message:e.$t("userSetting.basicInfo.placeholder.password")}]},{default:s(()=>[a(_,{modelValue:t.value.password,"onUpdate:modelValue":l[1]||(l[1]=c=>t.value.password=c),placeholder:e.$t("userSetting.basicInfo.placeholder.password")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(n,{field:"passwordConfirm",label:e.$t("userSetting.basicInfo.form.label.password.confirm"),rules:f},{default:s(()=>[a(_,{modelValue:p.value,"onUpdate:modelValue":l[2]||(l[2]=c=>p.value=c),placeholder:e.$t("userSetting.basicInfo.placeholder.password.confirm")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{field:"mobile",label:e.$t("userSetting.basicInfo.form.label.mobile"),rules:[{required:!0,message:e.$t("userSetting.form.error.mobile.required")}]},{default:s(()=>[a(d,{modelValue:t.value.mobile,"onUpdate:modelValue":l[3]||(l[3]=c=>t.value.mobile=c),placeholder:e.$t("userSetting.basicInfo.placeholder.mobile")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(n,{field:"email",label:e.$t("userSetting.basicInfo.form.label.email"),rules:[{required:!0,message:e.$t("userSetting.form.error.email.required")}]},{default:s(()=>[a(d,{modelValue:t.value.email,"onUpdate:modelValue":l[4]||(l[4]=c=>t.value.email=c),placeholder:e.$t("userSetting.basicInfo.placeholder.email")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),a(n,null,{default:s(()=>[a(i,null,{default:s(()=>[a(y,{type:"primary",onClick:S},{default:s(()=>[V(C(e.$t("userSetting.save")),1)]),_:1}),a(y,{type:"secondary",onClick:g},{default:s(()=>[V(C(e.$t("userSetting.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});var pe=$(me,[["__scopeId","data-v-499388fe"]]);const fe={class:"container"},_e={name:"Setting"},be=k(x(q({},_e),{setup(r){return(o,t)=>{const p=se,u=le,w=re,b=ne;return I(),D("div",fe,[a(u,{style:{"margin-bottom":"16px"}},{default:s(()=>[a(p,{span:24},{default:s(()=>[a(ce)]),_:1})]),_:1}),a(u,{class:"wrapper"},{default:s(()=>[a(p,{span:24},{default:s(()=>[a(b,{"default-active-key":"1",type:"rounded"},{default:s(()=>[a(w,{key:"1",title:o.$t("userSetting.tab.basicInformation")},{default:s(()=>[a(pe)]),_:1},8,["title"])]),_:1})]),_:1})]),_:1})])}}}));var qe=$(be,[["__scopeId","data-v-bb5680a0"]]);export{qe as default};
