var ge=Object.defineProperty,be=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var ye=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var K=(t,e,s)=>e in t?ge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,E=(t,e)=>{for(var s in e||(e={}))ye.call(e,s)&&K(t,s,e[s]);if(H)for(var s of H(e))ke.call(e,s)&&K(t,s,e[s]);return t},J=(t,e)=>be(t,me(e));import{a as W,_ as j,b as L,cV as Ce,cW as Se,cX as xe,cY as X,u as $e,cZ as Y,c_ as we,c$ as Le,d0 as Z}from"./index.fa1f2c20.js";import{F as Me}from"./index.6ac26b9a.js";import{aR as Te,d as F,c as m,e as M,i as De,aJ as S,A as f,B as T,E as g,aG as c,aF as i,u,aC as y,aD as D,aI as G,aH as Q,aL as ee,aM as A,b7 as te,b8 as oe,bw as Be,b3 as Ie,aS as Ee,bP as Fe,bQ as Re,bR as je,bC as Ae,bS as Pe,bT as ze,h as ne,bU as ae,bV as Ne,bW as Ve,w as se,C as ce,bX as Ue,bY as Oe,o as We,bZ as qe,b_ as He,by as re,b$ as Ke,c0 as Je,p as Xe,bb as Ye,bp as Ze,D as ie,c1 as Ge,aU as Qe,c2 as et,c3 as tt}from"./arco.35997891.js";import{f as P,h as ot,i as nt,j as at,k as st,l as ct}from"./vue.f2add872.js";/* empty css               *//* empty css              *//* empty css               *//* empty css               */import"./chart.baea2ca9.js";function rt(){const t=P(),e=W();return{logout:async l=>{await e.logout();const p=t.currentRoute.value;Te.success("\u767B\u51FA\u6210\u529F"),t.push({name:l&&typeof l=="string"?l:"login",query:J(E({},t.currentRoute.value.query),{redirect:p.name})})}}}const it=t=>(te("data-v-53fd3ac3"),t=t(),oe(),t),lt={class:"navbar"},ut={class:"left-side"},dt=it(()=>g("img",{alt:"logo",src:"//p3-armor.byteimg.com/tos-cn-i-49unhts6dw/dfdba5317c0c20ce20e64fac803d52bc.svg~tplv-49unhts6dw-image.image"},null,-1)),pt=ee(" milimili "),_t={class:"right-side"},ft=["src"],vt=F({setup(t){const e=L(),s=W(),{logout:l}=rt(),{changeLocale:p}=Ce(),{isFullscreen:d,toggle:v}=ot(),h=[...Se],x=m(()=>s.avatar),a=m(()=>e.theme),n=nt({selector:"body",attribute:"arco-theme",valueDark:"dark",valueLight:"light",storageKey:"arco-theme",onChanged(r){e.toggleTheme(r)}}),_=at(n),b=()=>{_()};M();const o=M(),k=()=>{l()},C=()=>{const r=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});o.value.dispatchEvent(r)},$=De("toggleDrawerMenu");return(r,B)=>{const z=Be,N=S("icon-menu-fold"),I=Ie,w=S("icon-language"),V=Ee,U=Fe,O=Re,q=je,ue=S("icon-moon-fill"),de=S("icon-sun-fill"),pe=S("icon-fullscreen-exit"),_e=S("icon-fullscreen"),fe=Ae,ve=S("icon-settings"),he=S("icon-export");return f(),T("div",lt,[g("div",ut,[c(I,null,{default:i(()=>[dt,c(z,{style:{margin:0,fontSize:"18px"},heading:5},{default:i(()=>[pt]),_:1}),u(e).device==="mobile"?(f(),y(N,{key:0,style:{"font-size":"22px",cursor:"pointer"},onClick:u($)},null,8,["onClick"])):D("",!0)]),_:1})]),g("ul",_t,[g("li",null,[c(U,{content:r.$t("settings.language")},{default:i(()=>[c(V,{class:"nav-btn",type:"outline",shape:"circle",onClick:C},{icon:i(()=>[c(w)]),_:1})]),_:1},8,["content"]),c(q,{trigger:"click",onSelect:u(p)},{content:i(()=>[(f(),T(G,null,Q(h,R=>c(O,{key:R.value,value:R.value},{default:i(()=>[ee(A(R.label),1)]),_:2},1032,["value"])),64))]),default:i(()=>[g("div",{ref_key:"triggerBtn",ref:o,class:"trigger-btn"},null,512)]),_:1},8,["onSelect"])]),g("li",null,[c(U,{content:u(a)==="light"?r.$t("settings.navbar.theme.toDark"):r.$t("settings.navbar.theme.toLight")},{default:i(()=>[c(V,{class:"nav-btn",type:"outline",shape:"circle",onClick:b},{icon:i(()=>[u(a)==="dark"?(f(),y(ue,{key:0})):(f(),y(de,{key:1}))]),_:1})]),_:1},8,["content"])]),g("li",null,[c(U,{content:u(d)?r.$t("settings.navbar.screen.toExit"):r.$t("settings.navbar.screen.toFull")},{default:i(()=>[c(V,{class:"nav-btn",type:"outline",shape:"circle",onClick:u(v)},{icon:i(()=>[u(d)?(f(),y(pe,{key:0})):(f(),y(_e,{key:1}))]),_:1},8,["onClick"])]),_:1},8,["content"])]),g("li",null,[c(q,{trigger:"click"},{content:i(()=>[c(O,null,{default:i(()=>[c(I,{onClick:B[0]||(B[0]=R=>r.$router.push({name:"Setting"}))},{default:i(()=>[c(ve),g("span",null,A(r.$t("messageBox.userSettings")),1)]),_:1})]),_:1}),c(O,null,{default:i(()=>[c(I,{onClick:k},{default:i(()=>[c(he),g("span",null,A(r.$t("messageBox.logout")),1)]),_:1})]),_:1})]),default:i(()=>[c(fe,{size:32,style:{marginRight:"8px",cursor:"pointer"}},{default:i(()=>[g("img",{alt:"avatar",src:u(x)},null,8,ft)]),_:1})]),_:1})])])])}}});var ht=j(vt,[["__scopeId","data-v-53fd3ac3"]]);const gt=[...xe],bt=gt.map(t=>{const{name:e,path:s,meta:l,redirect:p,children:d}=t;return{name:e,path:s,meta:l,redirect:p,children:d}});function mt(){const t=X(),e=L(),s=m(()=>e.menuFromServer?e.appAsyncMenus:bt);return{menuTree:m(()=>{const p=JSON.parse(JSON.stringify(s.value));console.log(p),p.sort((v,h)=>(v.meta.order||0)-(h.meta.order||0));function d(v,h){return v?v.map(a=>{var _,b;if(!t.accessRouter(a))return null;if(((_=a.meta)==null?void 0:_.hideChildrenInMenu)||!a.children)return a.children=[],a;a.children=a.children.filter(o=>{var k;return((k=o.meta)==null?void 0:k.hideInMenu)!==!0});const n=d(a.children,h+1);return n.length||h>1?(a.children=n,a):((b=a.meta)==null?void 0:b.hideInMenu)===!1?a:null}).filter(Boolean):null}return d(p,0)})}}function yt(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!Pe(t)}var kt=F({emit:["collapse"],setup(){const{t}=$e(),e=L(),s=P(),{menuTree:l}=mt(),p=m({get(){return e.device==="desktop"?e.menuCollapse:!1},set(n){e.updateSettings({menuCollapse:n})}}),d=M([]),v=M([]),h=n=>{if(we.test(n.path)){Le(n.path),v.value=[n.name];return}s.push({name:n.name})};Y(n=>{var _;if(n.meta.requiresAuth&&!n.meta.hideInMenu){const{matched:b}=n;if(b.length>1&&b.slice(0,b.length-1).forEach(({name:o})=>{d.value.includes(o)||d.value.push(o)}),n.meta.activeMenu)v.value=[n.meta.activeMenu];else{const o=(_=b[b.length-1])==null?void 0:_.name;v.value=[o]}}},!0);const x=n=>{e.device==="desktop"&&e.updateSettings({menuCollapse:n})},a=()=>{function n(_,b=[]){return _&&_.forEach(o=>{var $;const k=(($=o==null?void 0:o.meta)==null?void 0:$.icon)?()=>{var r;return ne(ae(`<${(r=o==null?void 0:o.meta)==null?void 0:r.icon}/>`))}:null,C=(o==null?void 0:o.children)&&(o==null?void 0:o.children.length)!==0?c(Ne,{key:o==null?void 0:o.name},{default:()=>[n(o==null?void 0:o.children)],icon:k,title:()=>{var r;return ne(ae(t(((r=o==null?void 0:o.meta)==null?void 0:r.locale)||"")))}}):c(Ve,{key:o==null?void 0:o.name,onClick:()=>h(o)},{default:()=>{var r;return[t(((r=o==null?void 0:o.meta)==null?void 0:r.locale)||"")]},icon:k});b.push(C)}),b}return n(l.value)};return()=>{let n;return c(ze,{collapsed:p.value,"onUpdate:collapsed":_=>p.value=_,"open-keys":d.value,"onUpdate:open-keys":_=>d.value=_,"show-collapse-button":e.device!=="mobile","auto-open":!1,"selected-keys":v.value,"auto-open-selected":!0,"level-indent":34,style:"height: 100%",onCollapse:x},yt(n=a())?n:{default:()=>[n]})}}});var le=j(kt,[["__scopeId","data-v-72f098ca"]]);const Ct=t=>(te("data-v-4e2b11ca"),t=t(),oe(),t),St={class:"tab-bar-container"},xt={class:"tab-bar-box"},$t={class:"tab-bar-scroll"},wt={class:"tags-wrap"},Lt=["onClick"],Mt={class:"tag-link"},Tt=["onClick"],Dt=Ct(()=>g("div",{class:"tag-bar-operation"},null,-1)),Bt=F({setup(t){const e=L(),s=Z(),l=P(),p=M(),d=m(()=>s.getTabList),v=m(()=>e.navbar?60:0);se(()=>e.navbar,()=>{p.value.updatePosition()}),Y(a=>{!a.meta.noAffix&&!d.value.some(n=>n.fullPath===a.fullPath)&&s.updateTabList(a)},!0);const h=(a,n)=>{if(s.deleteTag(n,a),n===d.value.length){const _=d.value[d.value.length-1];l.push({name:_.name})}},x=a=>{l.push(E({},a))};return(a,n)=>{const _=S("icon-close"),b=Oe;return f(),T("div",St,[c(b,{ref_key:"affixRef",ref:p,"offset-top":u(v)},{default:i(()=>[g("div",xt,[g("div",$t,[g("div",wt,[(f(!0),T(G,null,Q(u(d),(o,k)=>(f(),T("span",{key:o.fullPath,class:ce(["arco-tag arco-tag-size-medium arco-tag-checked",{"link-activated":o.fullPath===a.$route.fullPath}]),onClick:C=>x(o)},[g("span",Mt,A(a.$t(o.title)),1),g("span",{class:"arco-icon-hover arco-tag-icon-hover arco-icon-hover-size-medium arco-tag-close-btn",onClick:Ue(C=>h(o,k),["stop"])},[c(_)],8,Tt)],10,Lt))),128))])]),Dt])]),_:1},8,["offset-top"])])}}});var It=j(Bt,[["__scopeId","data-v-4e2b11ca"]]);function Et(t,e,s,l=!1){t.addEventListener&&typeof t.addEventListener=="function"&&t.addEventListener(e,s,l)}function Ft(t,e,s,l=!1){t.removeEventListener&&typeof t.removeEventListener=="function"&&t.removeEventListener(e,s,l)}const Rt=992;function jt(){return document.body.getBoundingClientRect().width-1<Rt}function At(t){const e=L();function s(){if(!document.hidden){const p=jt();e.toggleDevice(p?"mobile":"desktop"),e.toggleMenu(p)}}const l=st(s,100);We(()=>{t&&l()}),qe(()=>{Et(window,"resize",l)}),He(()=>{Ft(window,"resize",l)})}const Pt=F({setup(t){const e=Z(),s=m(()=>e.getCacheList);return(l,p)=>{const d=S("router-view");return f(),y(d,null,{default:i(({Component:v,route:h})=>[c(Je,{name:"fade",mode:"out-in",appear:""},{default:i(()=>[h.meta.ignoreCache?(f(),y(re(v),{key:h.fullPath})):(f(),y(Ke,{key:1,include:u(s)},[(f(),y(re(v),{key:h.fullPath}))],1032,["include"]))]),_:2},1024)]),_:1})}}});const zt={key:0,class:"layout-navbar"},Nt={class:"menu-wrapper"},Vt=F({setup(t){const e=L(),s=W(),l=P(),p=ct(),d=X();At(!0);const v="60px",h=m(()=>e.navbar),x=m(()=>e.menu),a=m(()=>e.hideMenu),n=m(()=>e.footer),_=m(()=>e.menuCollapse?48:e.menuWidth),b=m(()=>e.menuCollapse),o=m(()=>{const r=x.value&&!a.value?{paddingLeft:`${_.value}px`}:{},B=h.value?{paddingTop:v}:{};return E(E({},r),B)}),k=r=>{e.updateSettings({menuCollapse:r})};se(()=>s.role,r=>{r&&!d.accessRouter(p)&&l.push({name:"notFound"})});const C=M(!1),$=()=>{C.value=!1};return Xe("toggleDrawerMenu",()=>{C.value=!C.value}),(r,B)=>{const z=Ge,N=Qe,I=et,w=tt;return f(),y(w,{class:ce(["layout",{mobile:u(e).hideMenu}])},{default:i(()=>[u(h)?(f(),T("div",zt,[c(ht)])):D("",!0),c(w,null,{default:i(()=>[c(w,null,{default:i(()=>[u(x)?Ye((f(),y(z,{key:0,class:"layout-sider",breakpoint:"xl",collapsed:u(b),collapsible:!0,width:u(_),style:ie({paddingTop:u(h)?"60px":""}),"hide-trigger":!0,onCollapse:k},{default:i(()=>[g("div",Nt,[c(le)])]),_:1},8,["collapsed","width","style"])),[[Ze,!u(a)]]):D("",!0),u(a)?(f(),y(N,{key:1,visible:C.value,placement:"left",footer:!1,"mask-closable":"",closable:!1,onCancel:$},{default:i(()=>[c(le)]),_:1},8,["visible"])):D("",!0),c(w,{class:"layout-content",style:ie(u(o))},{default:i(()=>[u(e).tabBar?(f(),y(It,{key:0})):D("",!0),c(I,null,{default:i(()=>[c(Pt)]),_:1}),u(n)?(f(),y(Me,{key:1})):D("",!0)]),_:1},8,["style"])]),_:1})]),_:1})]),_:1},8,["class"])}}});var Gt=j(Vt,[["__scopeId","data-v-5424861c"]]);export{Gt as default};
