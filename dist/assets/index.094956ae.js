var L=Object.defineProperty,N=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var U=(r,o,t)=>o in r?L(r,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[o]=t,q=(r,o)=>{for(var t in o||(o={}))R.call(o,t)&&U(r,t,o[t]);if(j)for(var t of j(o))T.call(o,t)&&U(r,t,o[t]);return r},x=(r,o)=>N(r,A(o));import{_ as $,a as M,u as z,cT as J,cU as O}from"./index.97a7fd5a.js";/* empty css               */import{u as E}from"./index.5cdba46d.js";import{d as k,e as w,aJ as B,A as I,aC as P,aF as s,aG as e,B as D,aD as W,u as G,aL as V,aM as C,bC as H,bN as K,bO as Q,b3 as F,bj as X,aR as Y,b0 as Z,b5 as ee,b6 as ae,aS as te,b4 as oe,bd as se,be as le,bh as re,bi as ne}from"./arco.cef754ac.js";/* empty css               *//* empty css               *//* empty css               *//* empty css                */import{u as ie}from"./user-center.46d4511e.js";/* empty css              */import"./chart.ed6b2947.js";import"./vue.ba7251dd.js";const ue=["src"],de=k({setup(r){const o=M(),t={uid:"-2",name:"avatar.png",url:o.avatar},_=[{label:"userSetting.label.username",value:o.username},{label:"userSetting.label.nickname",value:o.nickname},{label:"userSetting.label.accountId",value:o.id},{label:"userSetting.label.phone",value:o.mobile},{label:"userSetting.label.email",value:o.email}],d=w([t]),v=(n,p)=>{d.value=[p]},b=n=>{const p=new AbortController;return async function(){const{onProgress:g,onError:a,onSuccess:l,fileItem:c,name:i="file"}=n;g(20);const f=new FormData;f.append(i,c.file);const y=u=>{let h;u.total>0&&(h=u.loaded/u.total*100),g(parseInt(String(h),10),u)};try{const u=await ie(f,{controller:p,onUploadProgress:y});l(u)}catch(u){a(u)}}(),{abort(){p.abort()}}};return(n,p)=>{const S=B("icon-camera"),g=H,a=K,l=Q,c=F,i=X;return I(),P(i,{bordered:!1},{default:s(()=>[e(c,{size:54},{default:s(()=>[e(a,{"custom-request":b,"list-type":"picture-card","file-list":d.value,"show-upload-button":!0,"show-file-list":!1,onChange:v},{"upload-button":s(()=>[e(g,{size:100,class:"info-avatar"},{"trigger-icon":s(()=>[e(S)]),default:s(()=>[d.value.length?(I(),D("img",{key:0,src:d.value[0].url},null,8,ue)):W("",!0)]),_:1})]),_:1},8,["file-list"]),e(l,{data:G(_),column:2,align:"right",layout:"inline-horizontal","label-style":{width:"140px",fontWeight:"normal",color:"rgb(var(--gray-8))"},"value-style":{width:"200px",paddingLeft:"8px",textAlign:"left"}},{label:s(({label:f})=>[V(C(n.$t(f))+" :",1)]),_:1},8,["data","label-style"])]),_:1})]),_:1})}}});var ce=$(de,[["__scopeId","data-v-553bfb1f"]]);const me=k({setup(r){const o=w(),t=w({nickname:"",password:"",mobile:"",email:""}),_=w(""),d=w(""),{loading:v,setLoading:b}=E(!0),{t:n}=z(),p=[{required:!0,message:n("userSetting.basicInfo.placeholder.password.confirm")},{validator:(a,l)=>new Promise(c=>{window.setTimeout(()=>{a!==t.value.password&&l(n("userSetting.basicInfo.placeholder.password.confirm.errMsg")),c()},100)})}],S=async()=>{b(!0);const a=JSON.parse(JSON.stringify(t.value));try{await J(a),Y.success(n("userSetting.form.edit.success"))}catch(l){d.value=l.message}finally{await O(),b(!1)}},g=async()=>{var a;await((a=o.value)==null?void 0:a.resetFields())};return(a,l)=>{const c=Z,i=ee,f=ae,y=te,u=F,h=oe;return I(),P(h,{ref_key:"formRef",ref:o,model:t.value,class:"form","label-col-props":{span:8},"wrapper-col-props":{span:16}},{default:s(()=>[e(i,{field:"nickname",label:a.$t("userSetting.basicInfo.form.label.nickname"),rules:[{required:!0,message:a.$t("userSetting.form.error.nickname.required")}]},{default:s(()=>[e(c,{modelValue:t.value.nickname,"onUpdate:modelValue":l[0]||(l[0]=m=>t.value.nickname=m),placeholder:a.$t("userSetting.basicInfo.placeholder.nickname")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(i,{field:"password",label:a.$t("userSetting.basicInfo.form.label.password"),rules:[{required:!0,message:a.$t("userSetting.basicInfo.placeholder.password")}]},{default:s(()=>[e(f,{modelValue:t.value.password,"onUpdate:modelValue":l[1]||(l[1]=m=>t.value.password=m),placeholder:a.$t("userSetting.basicInfo.placeholder.password")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(i,{field:"passwordConfirm",label:a.$t("userSetting.basicInfo.form.label.password.confirm"),rules:p},{default:s(()=>[e(f,{modelValue:_.value,"onUpdate:modelValue":l[2]||(l[2]=m=>_.value=m),placeholder:a.$t("userSetting.basicInfo.placeholder.password.confirm")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(i,{field:"mobile",label:a.$t("userSetting.basicInfo.form.label.mobile"),rules:[{required:!0,message:a.$t("userSetting.form.error.mobile.required")}]},{default:s(()=>[e(c,{modelValue:t.value.mobile,"onUpdate:modelValue":l[3]||(l[3]=m=>t.value.mobile=m),placeholder:a.$t("userSetting.basicInfo.placeholder.mobile")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(i,{field:"email",label:a.$t("userSetting.basicInfo.form.label.email"),rules:[{required:!0,message:a.$t("userSetting.form.error.email.required")}]},{default:s(()=>[e(c,{modelValue:t.value.email,"onUpdate:modelValue":l[4]||(l[4]=m=>t.value.email=m),placeholder:a.$t("userSetting.basicInfo.placeholder.email")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),e(i,null,{default:s(()=>[e(u,null,{default:s(()=>[e(y,{type:"primary",onClick:S},{default:s(()=>[V(C(a.$t("userSetting.save")),1)]),_:1}),e(y,{type:"secondary",onClick:g},{default:s(()=>[V(C(a.$t("userSetting.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});var pe=$(me,[["__scopeId","data-v-499388fe"]]);const fe={class:"container"},_e={name:"Setting"},be=k(x(q({},_e),{setup(r){return(o,t)=>{const _=B("Breadcrumb"),d=se,v=le,b=re,n=ne;return I(),D("div",fe,[e(_,{items:["menu.user","menu.user.setting"]},null,8,["items"]),e(v,{style:{"margin-bottom":"16px"}},{default:s(()=>[e(d,{span:24},{default:s(()=>[e(ce)]),_:1})]),_:1}),e(v,{class:"wrapper"},{default:s(()=>[e(d,{span:24},{default:s(()=>[e(n,{"default-active-key":"1",type:"rounded"},{default:s(()=>[e(b,{key:"1",title:o.$t("userSetting.tab.basicInformation")},{default:s(()=>[e(pe)]),_:1},8,["title"])]),_:1})]),_:1})]),_:1})])}}}));var qe=$(be,[["__scopeId","data-v-2d40b30a"]]);export{qe as default};
